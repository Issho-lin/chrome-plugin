(function(c){var a=new Array("00","33","66","99","CC","FF");var b=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");c.fn.colorpicker=function(e){var f=jQuery.extend({},jQuery.fn.colorpicker.defaults,e);d();return this.each(function(){var h=c(this);h.bind(f.event,function(){var n=c(this).offset().top;var o=c(this).height();var m=c(this).offset().left;c("#colorpanel").css({top:n+o+5,left:m}).show();var p=f.target?c(f.target):h;if(p.data("color")==null){p.data("color",p.css("color"))}if(p.data("value")==null){p.data("value",p.val())}c("#_creset").bind("click",function(){p.css("color",p.data("color")).val(p.data("value"));c("#colorpanel").hide();f.reset(h)});c("#CT tr td").unbind("click").mouseover(function(){var q=c(this).css("background-color");c("#DisColor").css("background",q);c("#HexColor").val(c(this).attr("rel"))}).click(function(){var q=c(this).attr("rel");q=f.ishex?q:g(q);if(f.fillcolor){p.val(q)}p.css("color",q);c("#colorpanel").hide();c("#_creset").unbind("click");f.success(h,q)})})});function d(){c("body").append('<div id="colorpanel" style="position: absolute; display: none;"></div>');var h="";var m="";for(i=0;i<2;i++){for(j=0;j<6;j++){h=h+"<tr height=12>";h=h+'<td width=11 rel="#000000" style="background-color:#000000">';m=i==0?a[j]+a[j]+a[j]:b[j];h=h+'<td width=11 rel="#'+m+'" style="background-color:#'+m+'">';h=h+'<td width=11 rel="#000000" style="background-color:#000000">';for(k=0;k<3;k++){for(l=0;l<6;l++){m=a[k+i*3]+a[l]+a[j];h=h+'<td width=11 rel="#'+m+'" style="background-color:#'+m+'">'}}}}h='<table width=253 border="0" cellspacing="0" cellpadding="0" style="border:1px solid #000;"><tr height=30><td colspan=21 bgcolor=#cccccc><table cellpadding="0" cellspacing="1" border="0" style="border-collapse: collapse"><tr><td width="3"><td><input type="text" id="DisColor" size="6" disabled style="border:solid 1px #000000;background-color:#ffff00"></td><td width="3"><td><input type="text" id="HexColor" size="7" style="border:inset 1px;font-family:Arial;" value="#000000"><a href="javascript:void(0);" id="_cclose">关闭</a> | <a href="javascript:void(0);" id="_creset">清除</a></td></tr></table></td></table><table id="CT" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="000000"  style="cursor:pointer;">'+h+"</table>";c("#colorpanel").html(h);c("#_cclose").live("click",function(){c("#colorpanel").hide();return false}).css({"font-size":"12px","padding-left":"20px"})}function g(m){var h;if(m&&m.constructor==Array&&m.length==3){m=m}if(h=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(m)){m=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}if(h=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(m)){m=[parseFloat(h[1])*2.55,parseFloat(h[2])*2.55,parseFloat(h[3])*2.55]}if(h=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(m)){m=[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}if(h=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(m)){m=[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}return"rgb("+m[0]+","+m[1]+","+m[2]+")"}};jQuery.fn.colorpicker.defaults={ishex:true,fillcolor:false,target:null,event:"click",success:function(){},reset:function(){}}})(jQuery);