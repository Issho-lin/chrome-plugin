var AjaxDebugger=(function(){var a=(function(){var e="log,debug,info,warn,error,group,groupCollapsed,groupEnd".split(",");var c=function(g,h,f){chrome.extension.sendMessage({type:MSG_TYPE.AJAX_DEBUGGER_CONSOLE,content:escape(JSON.stringify(Array.prototype.slice.call(arguments,0)))})};var d=new Function();e.forEach(function(f){d[f]=c.bind(d,f)});return d})();var b=function(e){var d=e.request.url||"",i=(d.indexOf("?")>-1)?"&":"?",h=(e.request.postData&&e.request.postData.params)||[],f=e.response.status+" "+e.response.statusText,g=e.response.bodySize+e.response.headersSize;var c="";h.forEach(function(m,l){c+=(l==0?i:"&")+m.name+"="+m.value});var j="/"+(d.split("?")||[""])[0].replace("://","").split("/").splice(1).join("/");var k=e.time>1000?Math.ceil(e.time/1000)+"s":Math.ceil(e.time)+"ms";g=g>1024?Math.ceil(g/1024)+"KB":Math.ceil(g)+"B";e.getContent(function(m,l){if(m){try{e.response.responseData=JSON.parse(m)}catch(n){e.response.responseData=m}}var o="Ajax请求加载完毕 ("+[j,f,k,g].join(" - ")+")  -- By FeHelper";a.group(o);a.log("AjaxURL  :",{url:d+c});a.log("Request  :",{request:e.request});a.log("Response :",{response:e.response});a.log("OtherInfo:",{timeConsuming:k,timings:e.timings,time:e.startedDateTime,server:e.serverIPAddress});a.groupEnd()})};chrome.devtools.network.onRequestFinished.addListener(function(e){var c=e.request.url.split("?")[0];if(/\.js$/.test(c)){return false}var d=/\.json$/.test(c)||(e.request.headers.concat(e.response.headers)).some(function(f){return((f.name=="X-Requested-With"&&f.value=="XMLHttpRequest")||(f.name=="Content-Type"&&(f.value=="application/x-www-form-urlencoded"||/application\/json/.test(f.value)||/application\/javascript/.test(f.value)||/text\/javascript/.test(f.value))))});if(d){chrome.extension.sendMessage({type:MSG_TYPE.AJAX_DEBUGGER_SWITCH},function(f){if(f){b(e)}})}})})();