var baidu=function(){this.version="1.3.5"};baidu.namespace=new Object();baidu.namespace.register=function(f){var c=/^[_$a-z]+[_$a-z0-9]*/i;var d=f.split(".");var h="";var g="";var a=[window];for(var b=0;b<d.length;b++){if(!c.test(d[b])){throw new Error("Invalid namespace:"+d[b]+"");return}a[b+1]=a[b][d[b]];if(typeof a[b+1]=="undefined"){a[b+1]=new Object()}}};String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,"")};String.prototype.format=function(){var b=arguments.length,a=this;while(b--){a=a.replace(new RegExp("\\{"+b+"\\}","g"),arguments[b])}return a};Date.prototype.format=function(f){var a=function(n,m){var o="",l=(n<0),k=String(Math.abs(n));if(k.length<m){o=(new Array(m-k.length+1)).join("0")}return(l?"-":"")+o+k};if("string"!=typeof f){return this.toString()}var b=function(l,k){f=f.replace(l,k)};var g=this.getFullYear(),d=this.getMonth()+1,j=this.getDate(),h=this.getHours(),c=this.getMinutes(),i=this.getSeconds();b(/yyyy/g,a(g,4));b(/yy/g,a(parseInt(g.toString().slice(2),10),2));b(/MM/g,a(d,2));b(/M/g,d);b(/dd/g,a(j,2));b(/d/g,j);b(/HH/g,a(h,2));b(/H/g,h);b(/hh/g,a(h%12,2));b(/h/g,h%12);b(/mm/g,a(c,2));b(/m/g,c);b(/ss/g,a(i,2));b(/s/g,i);return f};String.prototype.getBytes=function(){var b=this.replace(/\n/g,"xx").replace(/\t/g,"x");var a=encodeURIComponent(b);return a.replace(/%[A-Z0-9][A-Z0-9]/g,"x").length};var getOuterHtmlEllipsis=function(d){var b=/(<[^>]+>)/g;var a=b.exec(d.outerHTML);var c=a?a[1]:d.outerHTML;c=c.length>40?c.substr(0,40)+"...":c;return c.replace(/</g,"&lt;").replace(/>/g,"&gt;")};var getOuterAndInnerHtmlEllipsis=function(b){var a=jQuery("<div></div>").append(b).html()};(function(){baidu.i18n={};baidu.i18n.getMessage=function(d,b){if(b){for(var c=0,a=b.length;c<a;c++){b[c]=""+b[c]}return chrome.i18n.getMessage(d,b)}else{return chrome.i18n.getMessage(d)}}})();const MSG_TYPE={BROWSER_CLICKED:"browser-clicked",GET_CSS:"get-css",GET_JS:"get-js",GET_HTML:"get-html",GET_COOKIE:"get-cookie",REMOVE_COOKIE:"remove-cookie",SET_COOKIE:"set-cookie",GET_OPTIONS:"get_options",SET_OPTIONS:"set_options",FCP_HELPER_INIT:"fcp_helper_init",CSS_READY:"css-ready",JS_READY:"js-ready",HTML_READY:"html-ready",ALL_READY:"all-ready",START_OPTION:"start-option",OPT_START_FCP:"opt-item-fcp",OPT_START_GRID:"opt-item-grid",CALC_PAGE_LOAD_TIME:"calc-page-load-time",GET_PAGE_WPO_INFO:"get_page_wpo_info",SHOW_PAGE_LOAD_TIME:"show-page-load-time",FCP_HELPER_DETECT:"fcp-helper-detect",GRID_DETECT:"grid-detect",JS_TRACKER:"js_tracker",CODE_COMPRESS:"code_compress",FROM_POPUP:"from_popup_action",TAB_CREATED_OR_UPDATED:"tab_created_or_updated",REGEXP_TOOL:"regexp",EN_DECODE:"endecode",JSON_FORMAT:"jsonformat",QR_CODE:"qrcode",CODE_BEAUTIFY:"codebeautify",TIME_STAMP:"timestamp",IMAGE_BASE64:"imagebase64",QR_DECODE:"qr_decode",AUTO_FORMART_PAGE_JSON:"opt_item_autojson",COLOR_PICKER:"color-picker:newImage",AJAX_DEBUGGER:"ajax-debugger",AJAX_DEBUGGER_CONSOLE:"ajax-debugger-console",AJAX_DEBUGGER_SWITCH:"ajax-debugger-switch"};const FILE={STYLE:"style",LINK:"link",SCRIPT:"script-block"};const PUBLIC_ID_WHITE_LIST={"":{systemIds:{"":true}},"-//W3C//DTD HTML 3.2 Final//EN":{systemIds:{"":true}},"-//W3C//DTD HTML 4.0//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/strict.dtd":true}},"-//W3C//DTD HTML 4.01//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/strict.dtd":true}},"-//W3C//DTD HTML 4.0 Transitional//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/loose.dtd":true}},"-//W3C//DTD HTML 4.01 Transitional//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/loose.dtd":true,"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd":true}},"-//W3C//DTD XHTML 1.1//EN":{systemIds:{"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd":true}},"-//W3C//DTD XHTML Basic 1.0//EN":{systemIds:{"http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd":true}},"-//W3C//DTD XHTML 1.0 Strict//EN":{systemIds:{"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd":true}},"-//W3C//DTD XHTML 1.0 Transitional//EN":{systemIds:{"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd":true}},"ISO/IEC 15445:1999//DTD HyperText Markup Language//EN":{systemIds:{"":true}},"ISO/IEC 15445:2000//DTD HTML//EN":{systemIds:{"":true}},"ISO/IEC 15445:1999//DTD HTML//EN":{systemIds:{"":true}}};const COMPAT_MODE_DIFF_PUBLIC_ID_MAP={"-//W3C//DTD HTML 4.0 Transitional//EN":{systemIds:{"http://www.w3.org/TR/html4/loose.dtd":{IE:"S",WebKit:"Q"}}},"ISO/IEC 15445:2000//DTD HTML//EN":{systemIds:{"":{IE:"Q",WebKit:"S"}}},"ISO/IEC 15445:1999//DTD HTML//EN":{systemIds:{"":{IE:"Q",WebKit:"S"}}}};const HTML_DEPRECATED_TAGS={acronym:"定义首字母缩写",applet:"定义Java Applet",basefont:"定义Font定义",big:"定义大号文本",center:"定义居中的文本",dir:"定义目录列表",font:"定义文字相关",frame:"定义框架",frameset:"定义框架集",isindex:"定义单行的输入域",noframes:"定义noframe 部分",s:"定义加删除线的文本",strike:"定义加删除线的文本",tt:"定义打字机文本",u:"定义下划线文本",xmp:"定义预格式文本",layer:"定义层"};const HTML_DEPRECATED_ATTRIBUTES={align:{iframe:true,img:true,object:true,table:true},color:{font:true},height:{td:true,th:true},language:{script:true},noshade:{hr:true},nowrap:{td:true,th:true},size:{hr:true,font:true,basefont:true}};const BLOCK_HTML_ELEMENT=["address","blockquote","center","dir","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","isindex","menu","noframes","noscript","ol","p","pre","table","ul"];const INLINE_HTML_ELEMENT=["a","acronym","b","bdo","big","br","cite","code","dfn","em","font","i","img","input","kbd","label","q","s","samp","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"];const CHANGE_ABLE_HTML_ELEMENT=["applet","button","del","iframe","ins","map","object","script"];const CONDITIONAL_COMMENT_REGEXP=/\[\s*if\s+[^\]][\s\w]*\]/i;const NOT_IE_REVEALED_OPENING_CONDITIONAL_COMMENT_REGEXP=/^\[if\s+(!IE|false)\]$/i;const REVEALED_CLOSING_CONDITIONAL_COMMENT_REGEXP=/^\[endif\s*\]$/i;const NOT_IE_HIDDEN_CONDITIONAL_COMMENT_REGEXP=/^\[if\s+(!IE|false)\]>.*<!\[endif\]$/i;const REG={SCRIPT:/<script[^>]*>[\s\S]*?<\/[^>]*script>/gi,COMMENT:/<!--[\s\S]*?--\>/g,CSS_EXPRESSION:/expression[\s\r\n ]?\(/gi,TEXTAREA:/<textarea[^>]*>[\s\S]*?<\/[^>]*textarea>/gi,INVALID_TAG:/<\W+>/gi};const SELF_CLOSING_TAGS=["meta","link","area","base","col","input","img","br","hr","param","embed"];baidu.feOption=(function(){var j=false;var d=function(q){for(var r in q){window.localStorage.setItem(r,q[r])}};var f=function(r){var t={};for(var s=0,q=r.length;s<q;s++){t[r[s]]=window.localStorage.getItem(r[s])}return t};var n=function(q,r){chrome.extension.sendMessage({type:MSG_TYPE.GET_OPTIONS,items:q},r)};var l=function(q){chrome.extension.sendMessage({type:MSG_TYPE.SET_OPTIONS,items:q})};var a=function(q,r){if(r&&typeof r=="function"){r.call(null,f(q))}};var p=function(q){d(q)};var b=function(q){return f([q])[q]};var g=["opt_item_contextMenus","EN_DECODE","CODE_BEAUTIFY","JSON_FORMAT","QR_CODE","COLOR_PICKER","REGEXP_TOOL","TIME_STAMP","IMAGE_BASE64","FCP_HELPER_DETECT","SHOW_PAGE_LOAD_TIME","AJAX_DEBUGGER"];if(!j){g.push("JSON_PAGE_FORMAT")}var c=function(){var q={};$.each(g,function(r,s){q[s]=$("#"+s).attr("checked")});l(q)};var m=function(){n(g,function(q){$.each(g,function(r,s){if(q[s]==="false"){$("#"+s).removeAttr("checked")}})})};var k=function(){chrome.tabs.query({active:true,currentWindow:true},function(q){var r=q[0];chrome.tabs.remove(r.id)})};var i=function(){$("#btn_close").click(function(){k()});$("#btn_save").click(function(){c();alert("恭喜，FeHelper配置修改成功!");k();e.preventDefault();e.stopPropagation()})};var o=function(){m()};var h=function(){i();o()};return{pageJsonMustFormat:j,optionItems:g,init:h,doSetOptions:p,doGetOptions:a,getOptionItem:b,getOptions:n,setOptions:l}})();baidu.namespace.register("baidu.FL");baidu.FL=new (function(){this.FL_EOF=1;this.FL_TPL_DELIMITER=2;this.FL_NEW_LINE=3;this.FL_NORMAL=4;this.HTML_CONTENT=111;this.HTML_TAG=112;this.HTML_JS_START=113;this.HTML_JS_CONTENT=114;this.HTML_JS_END=115;this.HTML_CSS_START=116;this.HTML_CSS_CONTENT=117;this.HTML_CSS_END=118;this.HTML_IE_HACK_START=119;this.HTML_IE_HACK_EDN=120;this.HTML_DOC_TYPE=121;this.HTML_COMMENT=122;this.HTML_STATUS_OK=123;this.HTML_TAG_START=124;this.HTML_TAG_END=125;this.HTML_TPL_ATTR_NAME=126;this.HTML_XML=127;this.HTML_TEXTAREA_START=128;this.HTML_TEXTAREA_CONTENT=129;this.HTML_TEXTAREA_END=130;this.HTML_PRE_START=131;this.HTML_PRE_CONTENT=132;this.HTML_PRE_END=133;this.JS_START_EXPR=211;this.JS_END_EXPR=212;this.JS_START_BLOCK=213;this.JS_END_BLOCK=214;this.JS_SEMICOLON=215;this.JS_WORD=216;this.JS_OPERATOR=217;this.JS_EQUALS=218;this.JS_INLINE_COMMENT=219;this.JS_BLOCK_COMMENT=220;this.JS_COMMENT=221;this.JS_STRING=222;this.JS_IE_CC=223;this.JS_REGEXP=224;this.JS_MODE_EXPRESSION=250;this.JS_MODE_INDENT_EXPRESSION=251;this.JS_MODE_DO_BLOCK=252;this.JS_MODE_BLOCK=253;this.JS_MODE_ARRAY=254;this.CSS_AT=311;this.CSS_NORMAL=312;this.CSS_DEVICE_DESC=313;this.CSS_DEVICE_START=314;this.CSS_DEVICE_END=315;this.CSS_SELECTOER=316;this.CSS_SELECTOER_START=317;this.CSS_SELECTOER_END=318;this.CSS_COMMENT=319;this.CSS_PROPERTY=320;this.CSS_VALUE=321;this.CSS_SEMICOLON=322;this.CSS_COLON=323})();baidu.namespace.register("baidu.cssAnalytic");baidu.cssAnalytic=function(){this.parsePos=0;this.content="";this.contentLength=0;this._output=[];this._pre_type="";this.run=function(a){this.content=a.trim().replace(/\n/g,"\n");this.contentLength=this.content.length;this.tokenAnalytic();return this._output};this.tokenAnalytic=function(){var a;while(true){a=this.getNextToken();if(a){if(a[1]===baidu.FL.FL_EOF){break}this._output.push(a);if(a[1]===baidu.FL.CSS_PROPERTY){this._output.push([":",baidu.FL.CSS_COLON])}else{if(a[1]===baidu.FL.CSS_VALUE){this._output.push([";",baidu.FL.CSS_SEMICOLON])}}}}};this.getNextToken=function(){if(this.parsePos>=this.contentLength){return["",baidu.FL.FL_EOF]}$char=this.content[this.parsePos];this.parsePos++;if($char==="\x0d"){return""}if($char==="\x0a"){return[$char,baidu.FL.FL_NEW_LINE]}if($char.trim()===""||$char===";"){return""}var d;if($char==="@"){d=this._getAtToken($char);if(d){return d}}else{if($char==="{"){switch(this._pre_type){case baidu.FL.CSS_DEVICE_DESC:this._pre_type=baidu.FL.CSS_DEVICE_START;return[$char,baidu.FL.CSS_DEVICE_START];default:this._pre_type=baidu.FL.CSS_SELECTOER_START;return[$char,baidu.FL.CSS_SELECTOER_START]}}else{if($char==="}"){switch(this._pre_type){case baidu.FL.CSS_SELECTOER_END:this._pre_type=baidu.FL.CSS_DEVICE_END;return[$char,baidu.FL.CSS_DEVICE_END];default:for(var f=this._output.length-1;f>=0;f--){var c=this._output[f];if(c[1]===baidu.FL.CSS_SELECTOER_START){this._pre_type=baidu.FL.CSS_SELECTOER_END;return[$char,baidu.FL.CSS_SELECTOER_END]}else{if(c[1]===baidu.FL.CSS_DEVICE_START){this._pre_type=baidu.FL.CSS_DEVICE_END;return[$char,baidu.FL.CSS_DEVICE_END]}}}this._pre_type=baidu.FL.CSS_SELECTOER_END;return[$char,baidu.FL.CSS_SELECTOER_END]}}else{if(this.content.substr(this.parsePos-1,2)==="/*"){d=this._getCommentToken($char);if(d){return d}}else{if($char==="\x0d"||$char==="\x0a"){return[$char,baidu.FL.FL_NEW_LINE]}}}}}switch(this._pre_type){case baidu.FL.CSS_SELECTOER_START:case baidu.FL.CSS_VALUE:d=this._getPropertyToken($char);this._pre_type=baidu.FL.CSS_PROPERTY;return d;case baidu.FL.CSS_PROPERTY:d=this._getValueToken($char);this._pre_type=baidu.FL.CSS_VALUE;return d;case baidu.FL.CSS_DEVICE_START:var b=this.parsePos;d=this._getPropertyToken($char);var a=d[0];if(a.indexOf("{")>-1){this.parsePos=b;d=this._getSelectorToken($char);this._pre_type=baidu.FL.CSS_DEVICE_START;if(d){return d}}else{this._pre_type=baidu.FL.CSS_PROPERTY;return d}default:d=this._getSelectorToken($char);if(d){return d}}return[$char,baidu.FL.CSS_NORMAL]};this._getAtToken=function(a){$resultString=a;while(this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="{"&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}if(this.content[this.parsePos]===";"){$resultString+=";";this.parsePos++;return[$resultString.trim(),baidu.FL.CSS_AT]}this._pre_type=baidu.FL.CSS_DEVICE_DESC;return[$resultString.trim(),baidu.FL.CSS_DEVICE_DESC]};this._getCommentToken=function(a,b){this.parsePos++;$resultString="";while(!(this.content[this.parsePos]==="*"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]==="/")&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}this.parsePos+=2;if(b){return"/*"+$resultString+"*/"}return["/*"+$resultString+"*/",baidu.FL.CSS_COMMENT]};this._getSelectorToken=function(a){var b=a;while(this.content[this.parsePos]!=="{"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){if(this.content[this.parsePos]==="/"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]==="*"){b+=this._getCommentToken("/",true)}else{b+=this.content[this.parsePos];this.parsePos++}}return[b.trim(),baidu.FL.CSS_SELECTOER]};this._getPropertyToken=function(a){$resultString=a;while(this.content[this.parsePos]!==":"&&this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}if(this.content[this.parsePos]!=="}"){this.parsePos++}return[$resultString.trim().toLowerCase(),baidu.FL.CSS_PROPERTY]};this._getValueToken=function(a){var c=a;var b=false;while(this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){a=this.content[this.parsePos];this.parsePos++;c+=a;if(!b&&c.toLowerCase()==="expression("){b=true;c+=this._getJSToken()}}if(this.content[this.parsePos]===";"){this.parsePos++}c=c.trim().replace(/\s+/ig," ");return[c,baidu.FL.CSS_VALUE]};this._getJSToken=function(){var b="",a;while(this.parsePos<this.contentLength){a=this.content[this.parsePos];this.parsePos++;b+=a;if(a===")"&&this._checkJSToken("("+b)){break}}return b};this._checkJSToken=function(d){var f=0;var c=0;for(var g=0,b=d.length;g<b;g++){var a=d[g];if(a[0]==="("){f++}else{if(a[0]===")"){c++}}}return f===c}};baidu.namespace.register("baidu.css");baidu.css=(function(){var t=null;var d=null;var H=null;var A=0;var E=null;var C=[];var z=null;var o=function(M){t={curIndex:0,queen:[],callback:new Function(),finished:M};d={}};var f=function(){z={styles:[],cssMinified:{files:[],count:0},backgroundImages:[],expressions:[],duplicatedFiles:[]}};var B=function(){H={matched:{count:0,selectors:[]},unmatched:{count:0,selectors:[]},ignored:{count:0,selectors:[]}}};var l=function(M){t.queen.push(M)};var c=function(){return t.queen[t.curIndex]};var j=function(){return(t.curIndex==t.queen.length)};var J=function(){t.curIndex+=1};var g=function(){return t.finished};var m=function(O){var M=/(.*\/)([^\/]+\.css)/;var N=M.exec((O||"").replace(/\?.*/,""));E=N?N[1]:""};var v=function(){return E||""};var w=function(O){var M=/(.*\/)([^\/]+\.css)/;var N=M.exec((O||"").replace(/\?.*/,""));return N?N[2]:"style块"+ ++A};var n=function(P,O){O=O.replace(/\/\*[\S\s]*?\*\//g,"");var M=w(P);C.push({href:P?P:"#",fileName:M,fileContent:O});try{var N=/@import\s+url\(\s*(\"|\')(.*)\1\s*\)(\s*;)?/ig;O.replace(N,function(S,R,T){l({link:{href:v()+T},style:null})})}catch(Q){}};var k=function(N){if(N.indexOf("http://")!=0){N=N.replace(/['"]/g,"");var M=v();if(N.indexOf("/")==0){M=""}else{if(N.indexOf("./")==0){N=N.substr(2)}else{if(N.indexOf("../")==0){N=N.substr(3);if(M.lastIndexOf("/")==M.length-1){M=M.substr(0,M.length-1)}M=M.substr(0,M.lastIndexOf("/")+1)}}}N=M+N}return N};var b=function(N,P){var O=/(background|background-image):(?:[\#\w]+\s+)?url\(([^\)]*)\)/ig;var M=[];P.replace(/\/\*[\S\s]*?\*\//g,"").replace(/\r?\n/,"").replace(/\s+\'|\"/g,"").replace(O,function(R,Q,S){S=S.replace(/\?.*/,"");M.push(k(S))});if(M.length){z.backgroundImages.push({fileName:N,bgImages:M})}};var F=function(N,P){var O=/:expression\(/ig;var M=P.replace(/\/\*[\S\s]*?\*\//g,"").replace(/\r?\n/,"").replace(/\s+/g,"").split(O);if(M.length-1){z.expressions.push({fileName:N,count:M.length-1})}};var p=function(O){var M=O.fileContent.split(/\n/);var N=O.fileContent.length/M.length;if(N<150&&M.length>1){z.cssMinified.count++;z.cssMinified.files.push({href:O.href,fileName:O.fileName})}};var D=function(M){var N=(function(){var O={link:[],style:[]};jQuery.each(M,function(Q,P){if(!!P.href){O.link.push(P)}else{O.style.push(P)}});return O})();return N};var L=function(M){m(M.href);chrome.extension.sendMessage(null,{type:MSG_TYPE.GET_CSS,link:M.href},function(N){n(N.path,N.content);h()})};var s=function(M){n("",M.ownerNode.innerText);h()};var h=function(){var M=c();if(g()||!M){chrome.extension.sendMessage({type:MSG_TYPE.CSS_READY});return}J();if(j()){o(true)}if(!!M.style){s(M.style)}else{if(!!M.link){L(M.link)}}};var u=function(){styleheets=D(document.styleSheets);if(styleheets.style&&styleheets.style.length>0){jQuery.each(styleheets.style,function(M,N){l({link:null,style:N})})}if(styleheets.link&&styleheets.link.length>0){jQuery.each(styleheets.link,function(M,N){l({link:N,style:null})})}h()};var y=function(){return[{type:0,count:H.unmatched.count,content:H.unmatched.selectors},{type:1,count:H.ignored.count,content:H.ignored.selectors},{type:2,count:H.matched.count,content:H.matched.selectors}]};var I=function(){var M=false;jQuery.each(C,function(N,O){r(O)})};var r=function(M){var Q=M.fileName;var P=M.fileContent;p(M);F(Q,P);b(Q,P);var O=(new baidu.cssAnalytic()).run(P);var N=i(O);B();jQuery.each(N,function(R,S){if(S.selector){a(S.selector,S.csstext)}});z.styles.push({path:Q,content:y()})};var i=function(T){var S=[],N="",U=[],P;for(var O=0,Q=T.length;O<Q;O++){var V=T[O];if(V[1]==baidu.FL.FL_NEW_LINE){continue}else{if(V[1]==baidu.FL.CSS_DEVICE_DESC){N=V[0];P=baidu.FL.CSS_DEVICE_START;continue}else{if(V[1]==baidu.FL.CSS_SELECTOER){N=V[0];P=baidu.FL.CSS_SELECTOER_START;continue}else{if(V[1]==baidu.FL.CSS_AT){N=V[0]}else{var M=O;for(;M<Q;M++){var R=T[M];if(V[1]==baidu.FL.CSS_AT){M--;break}else{if(R[1]==baidu.FL.CSS_DEVICE_END&&P==baidu.FL.CSS_DEVICE_START){U.push(R[0]);break}else{if(R[1]==baidu.FL.CSS_SELECTOER_END&&P==baidu.FL.CSS_SELECTOER_START){U.push(R[0]);break}else{U.push(R[0])}}}}O=M}}}}S.push({selector:N,csstext:U.join("")});U=[];P=""}return S};var a=function(N,T){var P=N.replace(/\r?\n/g,"").trim().split(",");var S="",M;var R=/^([\*\+]+[^ ]+)[ ]+(.*)$/;var O=/([^:]+)(:hover|:focus|:visited|:link|:active|:before|:after|::)/;var Q;jQuery.each(P,function(W,U){S=U;M=R.exec(U);if(M&&M[1]&&M[2]){U=M[2]}var Y=false;if(U.indexOf("@")>-1||U.indexOf("-moz-")>-1){d[U]=1}else{if(!d[U]){var V=O.exec(U);if(V&&V[1]){Y=true;U=V[1]}try{d[U]=jQuery(U+':not("[id^=fe-helper-],[id^=fe-helper-] '+U+'")').length}catch(X){d[U]=0}}}Q=d[U]?Y?"ignored":"matched":"unmatched";H[Q].count++;H[Q].selectors.push({selector:S,cssText:T})})};var q=function(){I()};var K=function(){styleheets=D(document.styleSheets);var O={};var N=[];var M={};if(styleheets.link&&styleheets.link.length>0){jQuery.each(styleheets.link,function(P,Q){O[Q.href]=parseInt(O[Q.href]||0,10)+1});jQuery.each(O,function(P,R){if(R>1){N.push({href:P,count:R})}else{var Q="";var S=[];jQuery.each(C,function(U,T){if(T.href==P){Q=T.fileContent.replace(/\s+/g,"");return false}});jQuery.each(C,function(U,T){if(Q==T.fileContent.replace(/\s+/g,"")&&!M[T.href]&&S.join(",").indexOf(T.href)==-1){S.push(T.href)}});if(S.length>1){N.push({href:P,dupFiles:S});M[P]=true}}})}z.duplicatedFiles=N};var G=function(){o(false);u()};var x=function(M){f();q();K();if(M&&typeof M=="function"){M.call(null,z)}};return{init:G,detect:x}})();baidu.namespace.register("baidu.htmlAnalytic");baidu.htmlAnalytic=function(){this.parsePos=0;this.content="";this.contentLength=0;this.singleTag=["br","input","link","meta","!doctype","basefont","base","col","area","hr","wbr","param","img","isindex","?xml","embed"];this.closeTagWhiteList=["html","body","li","tr","td"];this._output=[];this.__construct=function(){};this.run=function(b,a){if(a==undefined){a=1}this.content=b.trim().replace(/\r\n/g,"\n");if(this.content.indexOf("<?xml")>-1){return[[b,baidu.FL.HTML_XML]]}this.contentLength=this.content.length;if(a===1){this.tokenAnalytic();return this._output}return this.getTagAttributes(b)};this.tokenAnalytic=function(){var a;while(true){a=this.getNextToken();if(a){if(a[1]===baidu.FL.FL_EOF){break}this._output.push(a)}}};this.getNextToken=function(){if(this.parsePos>=this.contentLength){return["",baidu.FL.FL_EOF]}var a=this.content[this.parsePos];this.parsePos++;var d=this._output.length;var c;if(d){var b=this._output[d-1][1];if(b===baidu.FL.HTML_JS_START){c=this._getScriptOrStyleContent(a,1);if(c){return c}}else{if(b===baidu.FL.HTML_CSS_START){c=this._getScriptOrStyleContent(a,2);if(c){return c}}else{if(b===baidu.FL.HTML_TEXTAREA_START){c=this._getTextareaOrPreContent(a,1);if(c){return c}}else{if(b===baidu.FL.HTML_PRE_START){c=this._getTextareaOrPreContent(a,2);if(c){return c}}}}}}if(a==="\x0d"){return""}if(a==="\x0a"){return[a,baidu.FL.FL_NEW_LINE]}if(a==="<"&&this.content[this.parsePos]!=="<"){c=this._getTagToken(a);if(c){return c}}c=this._getContentToken(a);if(c){return c}return[a,baidu.FL.FL_NORMAL]};this._getTagToken=function(a){var b=a;do{if(this.parsePos>=this.contentLength){break}a=this.content[this.parsePos];this.parsePos++;if(a==='"'||a==="'"){if(b[1]!=="!"){b+=a;b+=this._getUnformated(a)}}else{b+=a}}while(a!==">");if(b[1]==="!"){if(b.indexOf("[if")>-1){if(b.indexOf("!IE")>-1){b+=this._getUnformated("-->",b)}return[b,baidu.FL.HTML_IE_HACK_START]}else{if(b.indexOf("[[endif")>-1){return[b,baidu.FL.HTML_IE_HACK_EDN]}else{if(this._checkEqual(b,2,7,"doctype")){return[b,baidu.FL.HTML_DOC_TYPE]}else{if(this._checkEqual(b,4,6,"status")){b+=this._getUnformated("-->",b);return[b,baidu.FL.HTML_STATUS_OK]}else{b+=this._getUnformated("-->",b);return[b,baidu.FL.HTML_COMMENT]}}}}}if(this._checkEqual(b,0,7,"<script")){return[b,baidu.FL.HTML_JS_START]}else{if(this._checkEqual(b,0,9,"<\/script>")){return[b,baidu.FL.HTML_JS_END]}else{if(this._checkEqual(b,0,6,"<style")){return[b,baidu.FL.HTML_CSS_START]}else{if(this._checkEqual(b,0,8,"</style>")){return[b,baidu.FL.HTML_CSS_END]}else{if(this._checkEqual(b,0,9,"<textarea")){return[b,baidu.FL.HTML_TEXTAREA_START]}else{if(this._checkEqual(b,0,11,"</textarea>")){return[b,baidu.FL.HTML_TEXTAREA_END]}else{if(this._checkEqual(b,0,4,"<pre")){return[b,baidu.FL.HTML_PRE_START]}else{if(this._checkEqual(b,0,6,"</pre>")){return[b,baidu.FL.HTML_PRE_END]}}}}}}}}if(this._checkEqual(b,0,2,"</")){return[b,baidu.FL.HTML_TAG_END]}return[b,baidu.FL.HTML_TAG_START]};this._checkEqual=function(a,d,b,c){return a.substr(d,b).toLowerCase()===c.toLowerCase()};this._getContentToken=function(a){var b=a;while(true){if(this.parsePos>=this.contentLength){break}if(this.content[this.parsePos]==="<"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]!=="<"&&this.content[this.parsePos+1]!==">"){break}b+=this.content[this.parsePos];this.parsePos++}return[b,baidu.FL.HTML_CONTENT]};this._getUnformated=function(a,b){if(b==undefined){b=""}if(b.indexOf(a)>-1){return""}var c="";do{if(this.parsePos>=this.contentLength){break}$c=this.content[this.parsePos];c+=$c;this.parsePos++}while(c.indexOf(a)==-1);if(a.length===1){while(a===this.content[this.parsePos]){c+=this.content[this.parsePos];this.parsePos++}}return c};this._getScriptOrStyleContent=function(a,b){var f=b==1?"<\/script>":"</style>";var d=f.length;if(this.content.substr(this.parsePos-1,d).toLowerCase()===f){return""}var i=a;while(this.parsePos<this.contentLength){if(this.content.substr(this.parsePos,d).toLowerCase()===f){break}else{i+=this.content[this.parsePos];this.parsePos++}}i=i.trim();var c=["<!--","/*<![CDATA[*/","//<![CDATA["];var g=["//-->","/*]]>*/","//]]>"];for(var h in c){if(i.indexOf(h)===0){i=i.substr(h.length);break}}for(var h in g){if(i.indexOf(h)===(i.length-h.length)){i=i.substr(0,i.length-h.length);break}}return[i.trim(),b===1?baidu.FL.HTML_JS_CONTENT:baidu.FL.HTML_CSS_CONTENT]};this._getTextareaOrPreContent=function(a,b){var d=b==1?"</textarea>":"</pre>";var c=d.length;if(this.content.substr(this.parsePos-1,c).toLowerCase()===d){return""}var f=a;while(this.parsePos<this.contentLength){if(this.content.substr(this.parsePos,c).toLowerCase()===d){break}else{f+=this.content[this.parsePos];this.parsePos++}}return[f.trim(),b===1?baidu.FL.HTML_TEXTAREA_CONTENT:baidu.FL.HTML_PRE_CONTENT]};this.getTagAttributes=function(c){var c=c.trim();if(c.substr(0,2)==="</"){return[baidu.FL.HTML_TAG_END,c.substr(2,c.length-3).trim()]}var b=[baidu.FL.HTML_TAG_START,"",[]];this.parsePos=1;this.contentLength=c.replace(/^>\/|>\/$/g,"").length;var a="";while(true){if(this.parsePos>=this.contentLength){break}$char=this.content[this.parsePos];this.parsePos++;if(!/^[a-z0-9]{1}$/g.test($char)){this.parsePos--;break}else{a+=$char}}b[1]=a;var f=$name="";while(true){if(this.parsePos>=this.contentLength){break}$char=this.content[this.parsePos];this.parsePos++;var d;if($char==='"'||$char==="'"){d=$char+this._getUnformated($char);b[2].push([$name,d])}else{if($char==="="){$name=f;f=""}else{if($char===" "){if(f){if($name){b[2].push([$name,f])}else{b[2].push([f,""])}}$name=f=""}else{if($char!==" "&&$char!="\n"&&$char!="\r"&&$char!="\t"){f+=$char}}}}}if(f){if($name){b[2].push([$name,f])}else{b[2].push([f,""])}}return b};this._in_array=function(d,b){for(var c=0,a=d.length;c<a;c++){if(b.trim()==d[c]){return true}}return false};this._getTagName=function(f,a){var b=/^<([^\s\/>]+)\s*\/?/g;var d=/^<\/([^\s]+)>/g;var c=(a==0?b:d).exec(f);return c?c[1]:""};this.getUnclosedTags=function(g){Array.prototype.remove=function(m){for(var i=this.length-1;i>=0;i--){if(m==this[i].tagName){this.splice(i,1);return true}}return false};var d=this.run(g);var a=[];for(var c=0,f=d.length;c<f;c++){if(d[c][1]===baidu.FL.HTML_PRE_START||d[c][1]===baidu.FL.HTML_PRE_END||d[c][1]===baidu.FL.HTML_TEXTAREA_START||d[c][1]===baidu.FL.HTML_TEXTAREA_END||d[c][1]===baidu.FL.HTML_TAG_START||d[c][1]===baidu.FL.HTML_TAG_END||d[c][1]===baidu.FL.HTML_XML){a.push(d[c])}}var l="";var k=[];var b=[];for(var c=0,f=a.length;c<f;c++){if(a[c][1]!==baidu.FL.HTML_PRE_END&&a[c][1]!==baidu.FL.HTML_TEXTAREA_END&&a[c][1]!==baidu.FL.HTML_TAG_END){l=this._getTagName(a[c][0],0);b.push({tagName:l,outerHTML:a[c][0],type:1})}else{l=this._getTagName(a[c][0],1);if(!b.remove(l)){k.push({tagName:l,outerHTML:a[c][0],type:0})}}}var h=[],j=b.concat(k);for(var c=0,f=j.length;c<f;c++){if((!this._in_array(this.singleTag,j[c].tagName.toLowerCase())||j[c].type==0)&&!this._in_array(this.closeTagWhiteList,j[c].tagName.toLowerCase())){h.push(j[c])}}return h}};baidu.namespace.register("baidu.doctype");baidu.doctype=(function(){var f={IE:"Q",WebKit:"Q",hasCommentBeforeDTD:false,hasConditionalCommentBeforeDTD:false,isUnusualDocType:false,hasDocType:false};function c(l,m,k){if(l.toLowerCase()=="\"xmlns:xsl='http://www.w3.org/1999/xsl/transform'\""&&m==""&&k==""){f.IE="S";f.WebKit="Q";f.isUnusualDocType=false}}function g(k){return CONDITIONAL_COMMENT_REGEXP.test(k)}function i(k){return NOT_IE_HIDDEN_CONDITIONAL_COMMENT_REGEXP.test(k)}function a(k){return REVEALED_CLOSING_CONDITIONAL_COMMENT_REGEXP.test(k)}function b(k){return NOT_IE_REVEALED_OPENING_CONDITIONAL_COMMENT_REGEXP.test(k)}function h(l){var k=l.previousSibling;for(;k;k=k.previousSibling){if(b(k.nodeValue)){return k}}return null}function j(){var k={hasCommentBeforeDTD:false,hasConditionalCommentBeforeDTD:false};var l=document.doctype;if(!l){return k}var n=l.previousSibling;for(;n;n=n.previousSibling){if(n.nodeType==Node.COMMENT_NODE){var m=n.nodeValue;if(a(m)){n=h(n);if(n){k.hasConditionalCommentBeforeDTD=true;return k}continue}var o=g(m);if(!o){k.hasCommentBeforeDTD=true;continue}if(i(m)){k.hasConditionalCommentBeforeDTD=true}}}return k}function d(){var m=document.doctype;var o=document.compatMode.toLowerCase();f.hasDocType=(m)?true:false;f.WebKit=(o=="backcompat")?"Q":"S";f.IE=f.WebKit;if(!m){return}var n=m?m.name.toLowerCase():"";var p=m?m.publicId:"";var l=m?m.systemId:"";if(n!="html"){f.IE=undefined;f.isUnusualDocType=true}else{if(p in PUBLIC_ID_WHITE_LIST){if(!(l in PUBLIC_ID_WHITE_LIST[p].systemIds)){f.IE=undefined;f.isUnusualDocType=true}}else{f.IE=undefined;f.isUnusualDocType=true}}if((p in COMPAT_MODE_DIFF_PUBLIC_ID_MAP)&&(l in COMPAT_MODE_DIFF_PUBLIC_ID_MAP[p].systemIds)){f.IE=COMPAT_MODE_DIFF_PUBLIC_ID_MAP[p].systemIds[l].IE;f.isUnusualDocType=false}c(n,p,l);if(f.IE!="Q"){var k=j();if(k.hasConditionalCommentBeforeDTD){f.IE=undefined;f.hasConditionalCommentBeforeDTD=true}else{if(k.hasCommentBeforeDTD){f.IE="Q";f.hasCommentBeforeDTD=true}}}}return{getDocMode:function(){d();return f}}})();baidu.namespace.register("baidu.html");baidu.html=(function(){var t="";var q=null;var a=function(){q={HTMLBase:{HTMLDeprecatedAttribute:{},HTMLDeprecatedTag:{}},documentMode:{hasDocType:false,compatMode:{IE:"Q",WebKit:"Q"},publicId:"",hasComment:false,hasConditionalComment:false,isUnusualDocType:false},DOM:{IECondComm:[],FFNotSptComm:[],allComm:[],count:0,invalidInput:{count:0,input:[]},maxDepth:{xpath:"",depth:1}},title:[],LINK:{notInHead:[]},ID:{ids:{},count:0},tagInclude:[],unClosedTags:[],htmlMinified:true,imgTag:[]}};var v=function(y){return HTML_DEPRECATED_TAGS[y.toLowerCase()]};var u=function(z,y){z=z.toLowerCase();y=y.toLowerCase();return(HTML_DEPRECATED_ATTRIBUTES[y]&&HTML_DEPRECATED_ATTRIBUTES[y][z])};var f=function(A){var z=A.tagName.toLowerCase();if(v(z)){var y=q.HTMLBase.HTMLDeprecatedTag;if(!y[z]){y[z]=0}y[z]++}};var j=function(D){var C=D.tagName.toLowerCase();var y=D.attributes;var A=q.HTMLBase.HTMLDeprecatedAttribute;for(var z=0,E=y.length;z<E;++z){var B=y[z].name;if(u(C,B)){if(!A[B]){A[B]={}}if(!A[B][C]){A[B][C]=0}A[B][C]++}}};var h=function(A,y){var C=document.createNodeIterator(A,y,null,false);var z=[];var B=C.nextNode();while(B){z.push(B);B=C.nextNode()}return z};var p=function(){var y=h(document.documentElement,NodeFilter.SHOW_COMMENT);var D=/\[\s*if\s*[^\]][\s\w]*\]/i;var B=/--/g;for(var A=0,C=y.length;A<C;++A){var z=y[A];if(D.test(z.nodeValue)){q.DOM.IECondComm.push(z.nodeValue)}if(B.test(z.nodeValue)){q.DOM.FFNotSptComm.push(z.nodeValue)}q.DOM.allComm.push(z.nodeValue)}};var w=function(){q.documentMode=baidu.doctype.getDocMode()};var o=function(z){var y=q.ID;for(var A in z){if(z[A]>1){y.ids[A]=z[A];y.count++}}};var r=function(C){if(C.nodeType!==1||!C.tagName){return}if(C.id==="fe-helper-tab-box"||C.id==="fe-helper-pb-mask"){return}var D=q.DOM.maxDepth;var B=0;var z,y=[];do{if(C.id==="fe-helper-tab-box"||C.id==="fe-helper-pb-mask"){return}if(C.tagName.toLowerCase()=="svg"){continue}try{if(C.id){z=C.tagName.toLowerCase()+'<span style="color:red;">#'+C.id+"</span>"}else{if(C.className){z=C.tagName.toLowerCase()+'<span style="color:green;">.'+C.className.split(/\s+/).join(".")+"</span>"}else{z=C.tagName.toLowerCase()}}}catch(A){continue}B++;y.unshift(z)}while((C=C.parentNode)&&C.nodeType===1);if(B>D.depth){D.depth=B;D.xpath=y.join('<span style="color:gray;">&gt;</span>')}};var x=function(){var C=h(document.documentElement,NodeFilter.SHOW_ELEMENT);q.DOM.count=C.length;var z={};for(var B=0,y=C.length;B<y;++B){var A=C[B];f(A);j(A);r(A);if(!!A.id){if(!z[A.id]){z[A.id]=0}z[A.id]++}}o(z)};var n=function(){var z=document.querySelectorAll("link");var A=document.querySelectorAll("head link");var y=[];jQuery.each(z,function(C,D){var B=true;jQuery.each(A,function(F,E){if(D.href==E.href){B=false}});B?y.push(D):false});q.LINK.notInHead=y};var i=function(){var z=document.querySelectorAll("title");var A=document.querySelectorAll("head title");var y=false;var B=[];jQuery.each(z,function(D,C){y=false;jQuery.each(A,function(F,E){if(C==E){y=true;return false}});B.push({dom:C,isInHead:y})});q.title=B};var k=function(){var z=document.querySelectorAll("img[src]");var A=[];var B=/.*src=\"(.*)\".*/;var y=[];jQuery.each(z,function(D,C){y=B.exec(C.outerHTML);if(!y||y[1].trim()==""){A.push(C)}});q.imgTag=A};var s=function(){var y=document.querySelectorAll("input[type=text],input[type=password]");var z=q.DOM.invalidInput;jQuery.each(y,function(B,A){if(A.getAttribute("size")){z.count++;z.input.push(A)}})};var d=function(){var z=q.tagInclude;var A=null;var y=null;jQuery.each(INLINE_HTML_ELEMENT,function(C,B){jQuery.each(BLOCK_HTML_ELEMENT,function(D,E){A=document.querySelectorAll(B+">"+E);if(A.length>0){y=getOuterHtmlEllipsis(A[0].parentNode);jQuery.each(A,function(F,G){z.push({inline:y,block:getOuterHtmlEllipsis(G)})})}})})};var b=function(){var z=t;var A=new baidu.htmlAnalytic();var B=A.getUnclosedTags(z);for(var y=0;y<B.length;y++){q.unClosedTags.push(B[y].outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}};var c=function(){var y=t.split(/\n/);var z=t.length/y.length;if(z<150){q.htmlMinified=false}};var m=function(y){chrome.extension.sendMessage({type:MSG_TYPE.GET_HTML,link:location.href.split("#")[0]},function(z){t=z.content;chrome.extension.sendMessage({type:MSG_TYPE.HTML_READY});y&&y()})};var l=function(y){m(y)};var g=function(y){a();x();i();n();k();w();p();s();d();b();c();if(y&&typeof y=="function"){y.call(null,q)}};return{init:l,detect:g}})();baidu.namespace.register("baidu.js");baidu.js=(function(){var z=null;var d=0;var C=0;var t=[];_cookies=[];var n=null;var h=function(E){z={curIndex:0,queen:[],callback:new Function(),finished:E}};var B=function(E){z.queen.push(E)};var j=function(){return z.queen[z.curIndex]};var p=function(){return(z.curIndex==z.queen.length)};var o=function(){z.curIndex+=1};var m=function(){return z.finished};var x=function(G){var E=/(.*\/)([^\/]+\.js)/;var F=E.exec((G||"").replace(/\?.*/,""));return F?F[2]:G?("异步接口"+ ++d):("script块"+ ++C)};var b=function(){n={cookies:[],scriptTag:{scriptBlock:0,scriptSrc:0},domain:false,jsMinified:{files:[],count:0},tangram:[],duplicatedFiles:[]}};var y=function(G,F){F=F.replace(/\/\*[\S\s]*?\*\//g,"");var E=x(G);t.push({href:G?G:"#",fileName:E,fileContent:F})};var l=function(E){var F=(function(){var G={src:[],block:[]};jQuery.each(E,function(I,H){if(!!H.src){G.src.push(H)}else{if(!!H.innerHTML){G.block.push(H)}}});return G})();return F};var D=function(E){chrome.extension.sendMessage({type:MSG_TYPE.GET_JS,link:E.src},function(F){y(F.path,F.content);s()})};var f=function(E){y("",E.innerHTML);s()};var s=function(){var E=j();if(m()||!E){chrome.extension.sendMessage({type:MSG_TYPE.JS_READY});return}o();if(p()){h(true)}if(!!E.block){f(E.block)}else{if(!!E.src){D(E.src)}}};var w=function(){scripts=l(document.scripts);if(scripts.block&&scripts.block.length>0){jQuery.each(scripts.block,function(F,E){B({src:null,block:E})})}if(scripts.src&&scripts.src.length>0){jQuery.each(scripts.src,function(E,F){B({src:F,block:null})})}s()};var i=function(){var E=false;jQuery.each(t,function(F,G){A(G)});n.scriptTag={scriptSrc:jQuery("script[src]").length,scriptBlock:jQuery("script:not(script[src])").length}};var A=function(E){var G=E.fileName;var F=E.fileContent;c(E)};var u=function(){chrome.extension.sendMessage({type:MSG_TYPE.GET_COOKIE,url:location.href},function(E){_cookies=E.cookie})};var q=function(){n.cookies=_cookies};var c=function(G){var E=G.fileContent.split(/\n/);var F=G.fileContent.length/E.length;if(F<150&&E.length>1){n.jsMinified.count++;n.jsMinified.files.push({href:G.href,fileName:G.fileName})}};var v=function(){var F=document.querySelectorAll("script[src]");var E=[];jQuery.each(F,function(H,I){if(!I.src){return true}var G=x(I.src);if(G.indexOf("tangram")>-1){E.push(G)}});n.tangram=E};var r=function(){scripts=l(document.scripts);var G={};var F=[];var E={};if(scripts.src&&scripts.src.length>0){jQuery.each(scripts.src,function(H,I){G[I.src]=parseInt(G[I.src]||0,10)+1});jQuery.each(G,function(H,J){if(J>1){F.push({href:H,count:J})}else{var I="";var K=[];jQuery.each(t,function(M,L){if(L.href==H){I=L.fileContent.replace(/\s+/g,"");return false}});jQuery.each(t,function(M,L){if(I==L.fileContent.replace(/\s+/g,"")&&!E[L.href]&&K.join(",").indexOf(L.href)==-1){K.push(L.href)}});if(K.length>1){F.push({href:H,dupFiles:K});E[H]=true}}})}n.duplicatedFiles=F};var a=function(){i()};var k=function(){h(false);w();u()};var g=function(E){b();q();a();v();r();E.call(null,n)};return{init:k,detect:g,getCookies:u}})();baidu.namespace.register("baidu.fcptabs");baidu.fcptabs=(function(){var b={};var h=function(){var k=jQuery("#fe-helper-box");var l=jQuery("#fe-helper-main-tab");if(k[0]){k.remove()}k=jQuery('<div id="fe-helper-box" class="fe-helper-hide"></div>').appendTo("body");jQuery('<iframe id="fe-helper-main-ifr" src="about:blank" frameborder="0"></iframe>').appendTo(k);l=jQuery('<div id="fe-helper-main-tab"></div>').appendTo(k).html('		<ul id="fe-helper-main-ul">			<li id="fe-helper-closethick"><span class="ui-icon ui-icon-closethick" title="关闭面板">Close</span></li>			<li id="fe-helper-plusthick" class="fe-helper-hide"><span class="ui-icon ui-icon-plusthick" title="最大化面板">Maximun</span></li>			<li id="fe-helper-minusthick"><span class="ui-icon ui-icon-minusthick" title="最小化面板">Minimun</span></li>		</ul>		');k.css({height:jQuery(window).height()});l.tabs({tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",add:function(o,q){jQuery("#fe-helper-tab-"+b.type).css({height:jQuery(window).height()-80});var n="fe-helper-acc-"+b.type;jQuery(q.panel).append("<div id='"+n+"'>"+b.tabContent+"</div>");jQuery("#"+n).css({height:jQuery(window).height()-80});if(b.isAccordion){jQuery("#"+n).accordion({collapsible:true,active:false});var p=jQuery("#"+n+" .rst-content");var m=jQuery(window).height()-120-p.length*30;p.css({height:m})}}});jQuery("#fe-helper-main-ul span.ui-icon-close").live("click",function(){var m=jQuery("#fe-helper-main-ul li");var n=m.index(jQuery(this).parent())-3;l.tabs("remove",n);if(m.length==4){b.tabBox.remove()}});jQuery("#fe-helper-closethick").click(function(m){b.tabBox.hide("slide")});jQuery("#fe-helper-plusthick").click(function(m){b.tabBox.css({height:jQuery(window).height()});jQuery(this).hide().next().show()});jQuery("#fe-helper-minusthick").click(function(m){b.tabBox.css({height:38});jQuery(this).hide().prev().show()});jQuery(window).resize(function(m){b.tabBox.css({height:jQuery(window).height()})});b.tabBox=k;b.mainTab=l;return k};var g=function(l,n,m,k){b.type=l;b.tabContent=m;b.isAccordion=k;return b.mainTab.tabs("add","#fe-helper-tab-"+b.type,n)};var i=function(k,l){return g(k+"-issue-sug",baidu.i18n.getMessage("msg0061",[k]),l,false)};var d=function(k){return g("html",baidu.i18n.getMessage("msg0001"),k,true)};var j=function(k){return g("js",baidu.i18n.getMessage("msg0003"),k,true)};var c=function(l,k){b.cssTabContent=k;b.cssTabCount=b.cssTabCount||0;b.cssTabCount++;b.cssTab=jQuery("#fe-helper-tab-css");if(!b.cssTab[0]){g("css",baidu.i18n.getMessage("msg0002"),"",false);b.cssTab=jQuery("#fe-helper-tab-css").html('<ul id="fe-helper-css-ul"></ul>');b.cssTab.tabs({tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",add:function(o,q){var n="fe-helper-css-acc-"+b.cssTabCount;jQuery(q.panel).append("<div id='"+n+"'>"+b.cssTabContent+"</div>");jQuery("#"+n).accordion({collapsible:true,active:false});var p=jQuery("#"+n+" .rst-content");var m=jQuery(window).height()-180-p.length*30;p.css({height:m})}});jQuery("#fe-helper-css-ul span.ui-icon-close").live("click",function(){var m=jQuery("#fe-helper-css-ul li");var n=m.index(jQuery(this).parent());b.cssTab.tabs("remove",n)})}return b.cssTab.tabs("add","#fe-helper-tab-css-"+b.cssTabCount,l)};var f=function(){var k=new Date();baidu.fcptabs.createMainTab();if(b.progressbar){b.mask.remove()}b.mask=jQuery('<div id="fe-helper-pb-mask"><div id="f-h-p-m"></div><div id="fe-helper-progress-bar-img">正在进行页面检测，请稍后...</div><div id="fe-helper-progress-bar"></div></div>').appendTo("body");jQuery("#f-h-p-m").css({height:jQuery(window).height(),width:jQuery(window).width()});var l=chrome.extension.getURL("static/img/pbar-ani.gif");jQuery("#fe-helper-progress-bar-img").css({background:"url("+l+") repeat-x"});b.progressbar=jQuery("#fe-helper-progress-bar").progressbar({value:0,complete:function(m,n){var o=jQuery("#fe-helper-progress-bar-img").html("页面检测完成，共计耗时："+(new Date()-k)/1000+" s");b.tabBox.show("slide",{},500);jQuery("#f-h-p-m").fadeOut(500);o.fadeOut(3000)}});jQuery("#fe-helper-progress-bar-img").css({top:jQuery(window).height()/2-40,left:(jQuery(window).width()-800)/2})};var a=function(k){b.progressbar.progressbar("value",k)};return{createMainTab:h,addHtmlTab:d,addJavascriptTab:j,addCssTab:c,addIssueSuggestionTab:i,createProgressBar:f,updateProgressBar:a}})();baidu.namespace.register("baidu.fcphelper");baidu.fcphelper=(function(){var f=function(v){return'			<h3 class="rst-title">				<a href="#">'+v.title+'：					<span class="rst-count">'+v.count+'</span>				</a>			</h3>			<div class="rst-content">'+v.content+"</div>			"};var u=function(v,C,x){var A=[];var B=0;A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content-title">&nbsp;</td><td class="td-content-content">描述（Description）</td></tr></thead><tbody>');var w=function(F,E){var D=B%2==0?"tr-content-even":"";A.push('<tr class="'+D+'"><th class="td-linenum" rowspan="2">'+(++B)+'</th><td class="td-content-title"><span class="-x-issue">问题</span></td><td class="td-content-content -c-x-issue">'+F+"</td></tr>");A.push('<tr class="'+D+'"><td class="td-content-title"><span class="-x-suggestion">建议</span></td><td class="td-content-content">'+E+"</td></tr>")};var z;for(var y=C;y<=x;y++){z=("0000"+y);z=v+"_"+z.substr(z.length-4);w(baidu.i18n.getMessage(z),baidu.i18n.getMessage(z+"_suggestion"))}A.push("</tbody></table>");return A.join("")};var r=function(w,A,v){var x=[];var y=0;x.push("<div>"+baidu.i18n.getMessage("msg0042",[document.cookie.getBytes()])+"。如下是和整个站点相关的cookie：</div><br />");x.push("<table>");x.push('<thead><tr><td>序号</td><td class="td-cookie-name">名称（name）</td><td class="td-cookie-value">值（value）</td><td class="td-cookie-domain">所在域（domain）</td><td class="td-cookie-expires">过期时间（expires）</td><td class="td-cookie-op">操作</td></tr></thead><tbody>');var z=new Date()-1;jQuery.each(w.cookies,function(C,B){y++;x.push('<tr><td class="td-cookie-linenum">'+(C+1)+'</td><td class="td-cookie-name">'+B.name+'</td><td class="td-cookie-value" id="td-cookie-value-"'+B.name+">"+B.value+'</td><td class="td-cookie-domain">'+B.domain+'</td><td class="td-cookie-expires">'+(B.expirationDate?new Date(B.expirationDate*1000).format("yyyy年MM月dd日 HH时mm分ss秒"):"-")+'</td><td class="td-cookie-op"><button class="fe-a-cookie-delete -f-a-c-d-'+z+' ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"><span class="ui-button-text">删除</span></button><input type="hidden" id="hid-url-'+B.name+'" value="'+B.url+'" /><input type="hidden" id="hid-domain-'+B.name+'" value="'+B.domain+'" /><input type="hidden" id="hid-storeId-'+B.name+'" value="'+B.storeId+'" /><input type="hidden" id="hid-expires-'+B.name+'" value="'+(B.expirationDate?B.expirationDate:"")+'" /></td></tr>')});x.push("</tbody></table>");v.push(f({title:A,count:y,content:x.join("")}));jQuery("#fe-helper-box .-f-a-c-d-"+z).live("click",function(F){var E=jQuery(this);var D=E.parent().parent();var C=D.children(".td-cookie-name").html().trim();var B=jQuery("#hid-storeId-"+C).val().trim();chrome.extension.sendMessage({type:MSG_TYPE.REMOVE_COOKIE,name:C,url:jQuery("#hid-url-"+C).val().trim(),storeId:B},function(J){var I=E.parent().parent().parent();var H=I.index(D)-1;var G=0;D.remove();I.find("td.td-cookie-linenum").each(function(K,L){jQuery(L).html((K+1));G++});I.parent().parent().prev().find(".rst-count").html(G)})})};var k=function(y,A,x){var B=[];var C=0;B.push("<table>");B.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var v=function(F){B.push('<tr><th class="td-linenum">'+ ++C+'</th><td class="td-content">'+F+"</td></tr>")};if(y.scriptTag.scriptBlock){v(baidu.i18n.getMessage("msg0033",[y.scriptTag.scriptBlock]))}if(y.scriptTag.scriptSrc){v(baidu.i18n.getMessage("msg0034",[y.scriptTag.scriptSrc]))}if(y.jsMinified.count>0){var E=[];jQuery.each(y.jsMinified.files,function(F,G){if(G.href=="#"){E.push(baidu.i18n.getMessage("msg0047",[G.fileName]))}else{E.push(baidu.i18n.getMessage("msg0062",[G.href,G.fileName]))}});v(baidu.i18n.getMessage("msg0045",[E.join("、")]))}if(y.tangram.length>0){var E=[];jQuery.each(y.tangram,function(F,G){E.push(G)});if(E.length==1){v(baidu.i18n.getMessage("msg0054",[E.join("")]))}else{v(baidu.i18n.getMessage("msg0055",[E.join("、")]))}}if(y.duplicatedFiles.length){var D=[];var z=[];var w=[];jQuery.each(y.duplicatedFiles,function(G,H){if(H.dupFiles){var F=[];jQuery.each(H.dupFiles,function(I,J){F.push(baidu.i18n.getMessage("msg0069",[J,J]))});D.push(baidu.i18n.getMessage("msg0070",[F.join("、")]))}else{z.push(baidu.i18n.getMessage("msg0068",[H.href,H.href,H.count]))}});if(z.length){w.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+z.join("")+"</div>"]))}if(D.length){w.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+D.join("")+"</div>"]))}v(w.join(""))}B.push("</tbody></table>");x.push(f({title:A,count:C,content:B.join("")}))};var j=function(x,B,w){var A=true;for(var v in x.HTMLBase.HTMLDeprecatedTag){A=false;break}if(A){return}var y=[];var z=0;y.push("<table>");y.push('<thead><tr><td>标签（Tag）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(x.HTMLBase.HTMLDeprecatedTag,function(C,D){z++;y.push('<tr><th class="td-linenum">'+C+'</th><td class="td-content">'+baidu.i18n.getMessage("msg0004",[D])+baidu.i18n.getMessage("msg0005")+"</td></tr>")});y.push("</tbody></table>");w.push(f({title:B,count:z,content:y.join("")}))};var i=function(x,B,w){var A=true;for(var v in x.HTMLBase.HTMLDeprecatedAttribute){A=false;break}if(A){return}var y=[];var z=0;y.push("<table>");y.push('<thead><tr><td>属性（Attr）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(x.HTMLBase.HTMLDeprecatedAttribute,function(C,D){z++;y.push('<tr><th class="td-linenum">'+C+'</th><td class="td-content"><span class="x-detail">'+(function(){var E=[];jQuery.each(D,function(G,F){E.push(baidu.i18n.getMessage("msg0007",[F,G]))});return E.join("")})()+baidu.i18n.getMessage("msg0005")+"</span></td></tr>")});y.push("</tbody></table>");w.push(f({title:B,count:z,content:y.join("")}))};var g=function(w,z,v){var y=w.LINK.notInHead;if(y.length==0){return}var x="";x="<div>"+baidu.i18n.getMessage("msg0021",[y.length,"head"])+"</div>";x+=(function(B){var A=["<table>"];A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(y.length){jQuery.each(B,function(C,D){A.push('<tr>						<th class="td-linenum">'+(C+1)+'</th>						<td class="td-content">'+D.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td>					</tr>")})}A.push("</tbody></table>");return A.join("")})(y);v.push(f({title:z,count:y.length,content:x}))};var m=function(w,y,v){if(w.tagInclude.length==0){return}var x="";x+=(function(A){var z=["<table>"];z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(w.tagInclude.length>0){jQuery.each(A,function(C,B){z.push('<tr>						<th class="td-linenum">'+(C+1)+'</th>						<td class="td-content">'+baidu.i18n.getMessage("msg0035",[B.inline,B.block])+"</td>					</tr>")})}z.push("</tbody></table>");return z.join("")})(w.tagInclude);v.push(f({title:y,count:w.tagInclude.length,content:x}))};var q=function(w){var x=[];var z="<strong>混杂模式</strong>";var y="<em>标准模式</em>";var A=(w.documentMode.WebKit=="S")?y:z;if(w.documentMode.hasDocType){x.push(baidu.i18n.getMessage("msg0009"));if(w.documentMode.isUnusualDocType){x.push(baidu.i18n.getMessage("msg0010",[A,z]))}if(w.documentMode.hasConditionalCommentBeforeDTD||w.documentMode.hasCommentBeforeDTD){x.push(baidu.i18n.getMessage("msg0011",[A,z]))}if(w.documentMode.IE==w.documentMode.WebKit){x.push(baidu.i18n.getMessage("msg0012",[A]));if(w.documentMode.WebKit=="Q"){x.push(baidu.i18n.getMessage("msg0013"))}}else{if(!w.documentMode.isUnusualDocType){if(w.documentMode.IE){var v=(w.documentMode.IE=="Q")?z:y;var B=(w.documentMode.WebKit=="Q")?z:y;x.push(baidu.i18n.getMessage("msg0014",[v,B]));x.push(baidu.i18n.getMessage("msg0013"))}else{x.push(baidu.i18n.getMessage("msg0015"))}}else{x.push(baidu.i18n.getMessage("msg0013"))}}}else{x.push(baidu.i18n.getMessage("msg0016",[A]));x.push(baidu.i18n.getMessage("msg0013"))}return x.join("")};var s=function(x,C,w){var A=[];var B=0;A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var v=function(D){A.push('<tr><th class="td-linenum">'+(++B)+'</th><td class="td-content">'+D+"</td></tr>")};v(q(x));v(baidu.i18n.getMessage("msg0028",[x.DOM.count]));v(baidu.i18n.getMessage("msg0063",[x.DOM.maxDepth.depth,x.DOM.maxDepth.xpath]));if(x.title.length==0){v(baidu.i18n.getMessage("msg0049")+baidu.i18n.getMessage("msg0052"))}else{if(x.title.length>1){v(baidu.i18n.getMessage("msg0051")+baidu.i18n.getMessage("msg0052"))}else{if(!x.title[0].isInHead){v(baidu.i18n.getMessage("msg0050")+baidu.i18n.getMessage("msg0052"))}}}if(x.imgTag.length>0){var z="";jQuery.each(x.imgTag,function(E,D){z="";z+=D.id?"#"+D.id:"";z+=z.className?"."+z.className.replace(/\s+/g,"."):"";z=z?z:D.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;");v(baidu.i18n.getMessage("msg0053",[z]))})}if(x.DOM.allComm.length){if(x.DOM.IECondComm.length){v(baidu.i18n.getMessage("msg0018",[x.DOM.IECondComm.length]))}if(x.DOM.FFNotSptComm.length){v(baidu.i18n.getMessage("msg0060",[x.DOM.FFNotSptComm.length]))}v(baidu.i18n.getMessage("msg0030",[x.DOM.allComm.length,x.DOM.allComm.join("").getBytes()])+baidu.i18n.getMessage("msg0019"))}if(x.ID.count){var y=[];jQuery.each(x.ID.ids,function(E,D){y.push(baidu.i18n.getMessage("msg0064",[E,D]))});v(baidu.i18n.getMessage("msg0026",[x.ID.count,y.join("，")]))}if(x.DOM.invalidInput.count){v(baidu.i18n.getMessage("msg0029",[x.DOM.invalidInput.count]))}if(!x.htmlMinified){v(baidu.i18n.getMessage("msg0043"))}if(x.unClosedTags.length>0){var z=[];jQuery.each(x.unClosedTags,function(D,E){z.push(baidu.i18n.getMessage("msg0046",[E]))});v(baidu.i18n.getMessage("msg0038",[z.join("、")]))}A.push("</tbody></table>");w.push(f({title:C,count:B,content:A.join("")}))};var l=function(w){var x=[baidu.i18n.getMessage("msg0039"),baidu.i18n.getMessage("msg0040"),baidu.i18n.getMessage("msg0041")];var v=function(z){var y=["<table>"];y.push('<thead><tr><td>序号（Num）</td><td class="td-content">选择器（CSS Selector）</td></tr></thead><tbody>');jQuery.each(z,function(A,B){y.push('<tr><th class="td-linenum">'+(A+1)+'</th><td class="td-content"><span class="x-selector">'+B.selector+'</span><span class="x-css-text">'+B.cssText+"</span></td></tr>")});y.push("</tbody></table>");return y.join("")};jQuery.each(w.styles,function(z,A){var y=[];jQuery.each(A.content,function(C,B){y.push(f({title:x[C],count:B.count,content:v(B.content)}))});baidu.fcptabs.addCssTab(A.path,y.join(""))})};var c=function(y,x){var z=[];var C=0;var A=0;z.push("<table>");z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var w=function(D){z.push('<tr><th class="td-linenum">'+(++C)+'</th><td class="td-content">'+D+"</td></tr>")};if(y.backgroundImages.length){var v=[];var B=new Date()-1;jQuery.each(y.backgroundImages,function(D,E){v=['<div class="table-css-bg -t-c-b-'+B+'" style="display:none;">'];jQuery.each(E.bgImages,function(G,F){v.push("<div>"+F+"</div>")});v.push("</div>");w(baidu.i18n.getMessage("msg0057",[E.fileName,E.bgImages.length,B])+v.join(""));A+=E.bgImages.length});jQuery("#fe-helper-box .-x-expand-"+B).live("click",function(){var E=jQuery(this);var D=E.parent().next();if(D.css("display")=="none"){D.slideDown(300);E.html("收起")}else{D.slideUp(300);E.html("展开")}});jQuery("#fe-helper-box .-t-c-b-"+B+" div").live("mouseover",function(D){var E=jQuery("#fe-img-tootip");if(!E[0]){E=jQuery('<img id="fe-img-tootip" src="'+jQuery(this).html().trim()+'" alt="load image failed" />').appendTo("body")}else{E.attr("src",jQuery(this).html().trim())}E.css({top:D.pageY+20,left:D.pageX+20,"max-width":500,"max-height":500}).show()}).live("mouseout",function(D){var E=jQuery("#fe-img-tootip");E.hide()})}z.push("</tbody></table>");x.push(f({title:baidu.i18n.getMessage("msg0065"),count:A,content:z.join("")}))};var n=function(y){var B=[];var C=0;var x=[];B.push("<table>");B.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var v=function(F){B.push('<tr><th class="td-linenum">'+(++C)+'</th><td class="td-content">'+F+"</td></tr>")};if(y.duplicatedFiles.length){var D=[];var z=[];var w=[];jQuery.each(y.duplicatedFiles,function(G,H){if(H.dupFiles){var F=[];jQuery.each(H.dupFiles,function(I,J){F.push(baidu.i18n.getMessage("msg0069",[J,J]))});D.push(baidu.i18n.getMessage("msg0070",[F.join("、")]))}else{z.push(baidu.i18n.getMessage("msg0068",[H.href,H.href,H.count]))}});if(z.length){w.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+z.join("")+"</div>"]))}if(D.length){w.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+D.join("")+"</div>"]))}v(w.join(""))}if(y.cssMinified.count>0){var E=[];jQuery.each(y.cssMinified.files,function(F,G){if(G.href=="#"){E.push(baidu.i18n.getMessage("msg0047",[G.fileName]))}else{E.push(baidu.i18n.getMessage("msg0062",[G.href,G.fileName]))}});v(baidu.i18n.getMessage("msg0044",[E.join("、")]))}if(y.expressions.length){var A=[],E=0;jQuery.each(y.expressions,function(F,G){A.push(baidu.i18n.getMessage("msg0059",[G.fileName,G.count]));E+=G.count});v(baidu.i18n.getMessage("msg0058",[E,A.join("、")]))}B.push("</tbody></table>");x.push(f({title:baidu.i18n.getMessage("msg0048"),count:C,content:B.join("")}));c(y,x);baidu.fcptabs.addCssTab(baidu.i18n.getMessage("msg0048"),x.join(""))};var p=function(){baidu.html.detect(function(v){var w=[];j(v,baidu.i18n.getMessage("msg0006"),w);i(v,baidu.i18n.getMessage("msg0008"),w);g(v,baidu.i18n.getMessage("msg0022"),w);m(v,baidu.i18n.getMessage("msg0036"),w);s(v,baidu.i18n.getMessage("msg0020"),w);baidu.fcptabs.addHtmlTab(w.join(""))})};var b=function(){baidu.css.detect(function(v){l(v);n(v)})};var t=function(){baidu.js.detect(function(w){var v=[];r(w,baidu.i18n.getMessage("msg0031"),v);k(w,baidu.i18n.getMessage("msg0032"),v);baidu.fcptabs.addJavascriptTab(v.join(""))})};var a=function(){var v=function(w){return'<a class="-f-h-get-more-" href="#" onclick="return false;">'+w+"&gt;&gt;</a>"};jQuery(v("查看更多HTML帮助")).appendTo("#fe-helper-tab-html").click(function(y){if(!jQuery("#fe-helper-tab-HTML-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("HTML",u("html",1,42))}var w=jQuery("#fe-helper-main-tab>div");var x=w.index(jQuery("#fe-helper-tab-HTML-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",x)});jQuery(v("查看更多CSS帮助")).appendTo("#fe-helper-tab-css").click(function(y){if(!jQuery("#fe-helper-tab-CSS-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("CSS",u("css",1,119))}var w=jQuery("#fe-helper-main-tab>div");var x=w.index(jQuery("#fe-helper-tab-CSS-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",x)});jQuery(v("查看更多Javascript帮助")).appendTo("#fe-helper-tab-js").click(function(y){if(!jQuery("#fe-helper-tab-Javascript-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("Javascript",u("javascript",1,114))}var w=jQuery("#fe-helper-main-tab>div");var x=w.index(jQuery("#fe-helper-tab-Javascript-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",x)})};var d=function(){baidu.css.init();baidu.js.init()};var o=function(v){baidu.html.init(v)};var h=function(){baidu.fcptabs.createProgressBar();window.setTimeout(function(){p();b();t();a();baidu.fcptabs.updateProgressBar(100)},100)};return{initStaticFile:d,initHtml:o,detect:h}})();baidu.namespace.register("baidu.fehelper");baidu.fehelper=(function(){var b=function(){if(!jQuery("#_fehelper_jq_ui_css_")[0]){var f=chrome.extension.getURL("static/vendor/jquery-ui-1.8/jquery-ui.hot.css");jQuery('<link id="_fehelper_jq_ui_css_" href="'+f+'" rel="stylesheet" type="text/css" />').appendTo("head");var d=chrome.extension.getURL("static/css/fe-helper.css");jQuery('<link id="_fehelper_fcp_css_" href="'+d+'" rel="stylesheet" type="text/css" />').appendTo("head")}};var a=function(){chrome.extension.onMessage.addListener(function(f,d,g){if(f.type==MSG_TYPE.BROWSER_CLICKED&&f.event==MSG_TYPE.FCP_HELPER_INIT){baidu.fcphelper.initStaticFile()}if(f.type==MSG_TYPE.BROWSER_CLICKED&&f.event==MSG_TYPE.FCP_HELPER_DETECT){b();baidu.fcphelper.initHtml(function(){baidu.fcphelper.detect()})}})};var c=function(){a()};return{main:c}})();baidu.fehelper.main();baidu.calcPageLoadTime=(function(){var c={};var d=function(){if(c.header&&c.time&&c.pageInfo){b()}else{$.ajax({type:"GET",url:window.location.href,complete:function(j,i){c.header={date:j.getResponseHeader("Date"),connection:j.getResponseHeader("Connection"),contentEncoding:j.getResponseHeader("Content-Encoding"),contentLength:j.getResponseHeader("Content-Length"),server:j.getResponseHeader("Server"),vary:j.getResponseHeader("Vary"),transferEncoding:j.getResponseHeader("Transfer-Encoding"),contentType:j.getResponseHeader("Content-Type"),cacheControl:j.getResponseHeader("Cache-Control"),exprires:j.getResponseHeader("Exprires"),lastModified:j.getResponseHeader("Last-Modified")};a();h();b()}})}};var a=function(){c.pageInfo={title:document.title,url:location.href}};var h=function(){c.time=performance.timing};var b=function(){chrome.extension.sendMessage({type:MSG_TYPE.CALC_PAGE_LOAD_TIME,wpo:c})};var g=function(){if(/^((http)|(https))\:\/\//.test(location.href)){d()}else{a();h();b()}};var f=function(){chrome.runtime.onMessage.addListener(function(k,j,l){if(k.type==MSG_TYPE.GET_PAGE_WPO_INFO){(function i(){(document.readyState=="complete")?g():setTimeout(i,1000)})()}})};return{init:f}})();baidu.calcPageLoadTime.init();var FeHelper=window.FeHelper||{};FeHelper.elemTool={elm:function(b,c,j,g){var h=document.createElement(b),f,a;if(c){if(c.event||c.events){var d=c.event||c.events;if(typeof(d[0])=="string"){h.addEventListener(d[0],d[1],d[2])}else{if(d.length){for(f=0,a=d.length;f<a;f++){h.addEventListener(d[f][0],d[f][1],d[f][2])}}}}}for(f in c){if(f.substring(0,5)=="event"){}else{if(f=="checked"||f=="selected"){if(c[f]){h.setAttribute(f,f)}}else{h.setAttribute(f,c[f])}}}if(j){for(f=0,a=j.length;f<a;f++){if(j[f]){h.appendChild(j[f])}}}if(g){this.insertNode(h,g)}return h},txt:function(a){return document.createTextNode(a)},ent:function(a){return document.createTextNode(this.unescapeHtml(a))},paragraphs:function(f){var d=f.split("\n");var b=[];for(var c=0,a=d.length;c<a;c++){b.push(elemTool.elm("p",{},[elemTool.ent(d[c])]))}return b},insertNode:function(b,a,c){if(!a){a=document.body}if(c&&c.parentNode==a){a.insertBefore(b,c)}else{a.appendChild(b)}},insertNodes:function(c,a,f){if(typeof(c)!="array"){this.insertNode(c,a,f)}else{for(var d=0,b=c.length;d<b;d++){this.insertNode(c[d],a,f,true)}}},empty:function(a){while(a.lastChild){a.removeChild(a.lastChild)}},unescapeHtml:function(c){if(c.length<1){return c}var b=document.createElement("div");c=c.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,"");b.innerHTML=c;var a=b.childNodes[0].nodeValue;this.empty(b);return a}};var FeHelper=window.FeHelper||{};FeHelper.ColorPicker=(function(){if(!(document.documentElement instanceof HTMLElement)){return}var b="fehelper-colorpicker-box",aj="fehelper-colorpicker-result";var H=0;function B(c){return document.getElementById(c)}var ab=false,ai=false,U="F00BAF",t="",o=null;var q=null;var X=0,W=0,aa=false,O=false,h=false,ac="1px solid #666",N="";var w=false,p=0,K=0,J=0;var Z=document.createElement("canvas");var F=Z.getContext("2d"),L=1,ah=1;function ae(n,c,ak){return i(v(n)+v(c)+v(ak))}function i(c){return h?c.toLowerCase():c}function v(c){if(c==null){return"00"}c=parseInt(c);if(c==0||isNaN(c)){return"00"}c=Math.max(0,c);c=Math.min(c,255);c=Math.round(c);return"0123456789ABCDEF".charAt((c-c%16)/16)+"0123456789ABCDEF".charAt(c%16)}function I(c,am,ao){c/=255,am/=255,ao/=255;var ap=Math.max(c,am,ao),ak=Math.min(c,am,ao);var al,aq,n=(ap+ak)/2;if(ap==ak){al=aq=0}else{var an=ap-ak;aq=n>0.5?an/(2-ap-ak):an/(ap+ak);switch(ap){case c:al=(am-ao)/an+(am<ao?6:0);break;case am:al=(ao-c)/an+2;break;case ao:al=(c-am)/an+4;break}al/=6}return{h:Math.round(al*360),s:Math.round(aq*100),v:Math.round(n*100)}}function j(c){while(c.lastChild){c.removeChild(c.lastChild)}}function E(){ai.style.height="auto";ai.style.width=(innerWidth)+"px";L=ai.naturalWidth/innerWidth;ah=ai.naturalHeight/innerHeight;Z.width=ai.naturalWidth;Z.height=ai.naturalHeight;F.drawImage(ai,0,0);setTimeout(function(){M=false;ai.style.visibility="visible";ab.style.visibility="visible";document.body.style.cursor="url("+chrome.extension.getURL("static/img/crosshair.png")+") 16 16,crosshair";f()},255)}function m(n,al,c){if(O){return}var ak=75,am=32;ak=150;U=al?al:U;if(!B("fehelper-colorpicker-cpimprev")||(o&&!B("cprgbvl"))){j(ab);FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("img",{id:"fehelper-colorpicker-cpimprev",height:ak,width:ak,src:n,style:"margin:0px;padding:0px;margin:0px;"}),FeHelper.elemTool.elm("br"),FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:60px;height:20px;line-height:20px;font-size:10pt;border:"+ac,id:"fehelper-colorpicker-cphexvl",value:"#"+U,event:["mouseover",D]})],ab);Q()}else{B("fehelper-colorpicker-cpimprev").src=n;B("fehelper-colorpicker-cpimprev").width=ak;B("fehelper-colorpicker-cpimprev").height=ak;B("fehelper-colorpicker-cphexvl").value=U;ab.style.backgroundColor="#"+U}}function A(c){if(!ab){return}U=c.hex?c.hex:U;ab.style.backgroundColor="#"+U;if(O){G()}}function D(c){c.target.select()}function G(){j(ab);FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:80px;height:20px;line-height:20px;font-size:10pt;border:"+ac,id:"fehelper-colorpicker-cphexvl",value:"#"+U,event:["mouseover",D]}),FeHelper.elemTool.elm("img",{style:"width:20px;height:20px;position:absolute;top:-10px;right:-10px;cursor:pointer;",src:chrome.extension.getURL("static/img/close.png"),alt:"Close",title:"[esc]键可直接关闭",id:"fehelper-colorpicker-exitbtn",event:["click",C,true]})],ab);if(B("fehelper-colorpicker-cphexvl")){B("fehelper-colorpicker-cphexvl").select()}Q()}function z(){if(O){t=U;O=false;j(ab)}else{O=true;G()}}function C(){var c=setTimeout(ag,500);chrome.runtime.sendMessage({disableColorPicker:true},function(n){clearTimeout(c)})}function ag(){aa=false,O=false;document.removeEventListener("mousemove",T);removeEventListener("scroll",k);removeEventListener("resize",k);removeEventListener("keyup",g);V();clearTimeout(S)}function V(){if(document.body){ai=B(b),ab=B(aj);if(ai){document.body.removeChild(ai)}if(ab){document.body.removeChild(ab)}ai=false,ab=false;document.body.style.cursor=""}}function g(c){if(!aa){return}if(c.keyCode==27){C()}else{if(c.keyCode==82||c.keyCode==74){k()}else{if(c.keyCode==13){z()}}}}function T(c){if(!aa){return}if(!O){K=(c.pageX-pageXOffset),J=(c.pageY-pageYOffset);X=Math.round(K*L),W=Math.round(J*ah);f()}}function k(c){if(!aa){return}ab.style.visibility="hidden";ai.style.visibility="hidden";clearTimeout(S);S=setTimeout(function(){l()},250)}function d(){V();ai=FeHelper.elemTool.elm("img",{id:b,src:N,style:"position:fixed;max-width:none!important;max-height:none!important;top:0px;left:0px;margin:0px;padding:0px;overflow:hidden;z-index:2147483646;",events:[["click",z,true],["load",E]]},[],document.body);ab=FeHelper.elemTool.elm("div",{id:aj,style:"position:fixed;min-width:30px;max-width:300px;box-shadow:2px 2px 2px #666;border:"+ac+";border-radius:5px;z-index:2147483646;cursor:default;padding:10px;text-align:center;"},[],document.body);document.addEventListener("mousemove",T);addEventListener("keyup",g);addEventListener("scroll",k);addEventListener("resize",k);P();a()}function s(){if(!ab){d();return false}return a()}function a(){if(!aa){ab.style.visibility="hidden";ai.style.visibility="hidden";if(O){z()}document.body.style.cursor="url("+chrome.extension.getURL("static/img/crosshair.png")+") 16 16,crosshair";aa=true;setTimeout(l,1);return false}return true}function Q(){if(!ab){return}ab.style.top=(J+8)+"px";ab.style.left=(K+8)+"px";if(ab.clientWidth+ab.offsetLeft+24>innerWidth){ab.style.left=(K-8-ab.clientWidth)+"px"}if(ab.clientHeight+ab.offsetTop+24>innerHeight){ab.style.top=(J-8-ab.clientHeight)+"px"}}function f(c){if(!aa){return}Q();var n=F.getImageData(X,W,1,1).data;q=I(n[0],n[1],n[2]);o={r:n[0],g:n[1],b:n[2]};A({hex:ae(n[0],n[1],n[2])});u()}var M=false,S=0;function l(){if(!aa){return}if(M){clearTimeout(S);S=setTimeout(function(){l()},255);return}document.body.style.cursor="wait";M=true;ab.style.visibility="hidden";ai.style.visibility="hidden";ai.src=N;var c=innerWidth,n=innerHeight;ai.style.width=c+"px";ai.style.height=n+"px";setTimeout(function(){try{chrome.runtime.sendMessage({type:MSG_TYPE.COLOR_PICKER},function(al){})}catch(ak){console.log("有错误发生，可提交此反馈到官网！",ak)}},255)}var Y;var af=0,r=150;function u(au){var ao=X,an=W;if(M){w=false;return}var ar=Math.floor(r*0.5);var al=Math.round(ao),ak=Math.round(an);if(au){var am=y();am.scale(2,2);am.drawImage(Z,-al+(ar*0.5),-ak+(ar*0.5));am.scale(0.5,0.5);am.fillStyle="rgba(0,0,0,0.3)";am.fillRect(ar,0,1,r);am.fillRect(0,ar,r,1)}else{var am=y();am.drawImage(Z,-al+(ar),-ak+(ar));var ap,aq,av=15-0;for(var aw=0;aw<ar;aw+=2){ap=ar-aw;aq=ar+aw;am.drawImage(af,aq,0,ap,r,aq+1,0,ap,r);am.drawImage(af,0,0,ap+1,r,-1,0,ap+1,r);am.drawImage(af,0,aq,r,ap,0,aq+1,r,ap);am.drawImage(af,0,0,r,ap+1,0,-1,r,ap+1);if(aw==0){var ay=am.getImageData(ar,ar,1,1).data;var az=ay[0]+ay[1]+ay[2];if(az>192){am.fillStyle="rgba(30,30,30,0.8)"}else{am.fillStyle="rgba(225,225,225,0.8)"}}else{am.fillStyle="rgba(255,255,255,0.4)"}for(var aA=0;aA<av;aA++){if(++aw>=ar){break}ap=ar-aw;aq=ar+aw;am.drawImage(af,aq,0,ap,r,aq+1,0,ap,r);am.drawImage(af,0,0,ap+1,r,-1,0,ap+1,r);am.drawImage(af,0,aq,r,ap,0,aq+1,r,ap);am.drawImage(af,0,0,r,ap+1,0,-1,r,ap+1)}av--;if(av<1){av=1}am.fillRect(aq+1,0,1,r);am.fillRect(ap-1,0,1,r);am.fillRect(0,aq+1,r,1);am.fillRect(0,ap-1,r,1)}}Y=af.toDataURL();var at=(devicePixelRatio>1?38:19);var n=Math.floor(at*0.5);var aC=document.createElement("canvas");aC.width=at,aC.height=at;var aB=aC.getContext("2d");aB.drawImage(af,ar-n,ar-n,at,at,0,0,at,at);var ax={};ax[at]=aC.toDataURL();chrome.runtime.sendMessage({browserIconMsg:true,path:(ax)},function(){});m(Y,U,t);if(H>0){R()}w=false}function R(){chrome.runtime.sendMessage({setPreview:true,previewURI:Y,hex:U,lhex:t,elemTool:o.r,cg:o.g,cb:o.b},function(c){})}function y(){var c=af.getContext("2d");if(c){return c}else{P();return af.getContext("2d")}}function P(){af=document.createElement("canvas");af.width=r;af.height=r}function x(ak,n,c){var al={result:true};if(ak.enableColorPicker){al.wasAlreadyEnabled=s();if(ak.workerHasChanged){lsnaptabid=-1}if(al.wasAlreadyEnabled){al.hex=U;al.lhex=t;al.previewURI=Y;al.FeHelper.elemTool=o.r;al.cg=o.g;al.cb=o.b}}else{if(ak.doPick){z()}else{if(ak.setPickerImage){ai.src=ak.pickerImage}}}al.isPicking=!O;c(al)}function ad(){ag();chrome.runtime.onMessage.removeListener(x);chrome.runtime.onMessage.addListener(x);chrome.runtime.onConnect.addListener(function(c){if(c.name=="popupshown"){H++;c.onDisconnect.addListener(function(n){H--;if(H<0){H=0}})}})}return{init:ad}})();FeHelper.ColorPicker&&FeHelper.ColorPicker.init&&FeHelper.ColorPicker.init();var JsonFormatDealer=(function(){var c=1,h=2,a=3,f=4,q=5,s=6;function j(y){y=("__"+y+"__").split("");var x={singleQuote:false,doubleQuote:false,regex:false,blockComment:false,lineComment:false,condComp:false};for(var w=0,v=y.length;w<v;w++){if(x.regex){if(y[w]==="/"&&y[w-1]!=="\\"){x.regex=false}continue}if(x.singleQuote){if(y[w]==="'"&&y[w-1]!=="\\"){x.singleQuote=false}continue}if(x.doubleQuote){if(y[w]==='"'&&y[w-1]!=="\\"){x.doubleQuote=false}continue}if(x.blockComment){if(y[w]==="*"&&y[w+1]==="/"){y[w+1]="";x.blockComment=false}y[w]="";continue}if(x.lineComment){if(y[w+1]==="\n"||y[w+1]==="\r"){x.lineComment=false}y[w]="";continue}if(x.condComp){if(y[w-2]==="@"&&y[w-1]==="*"&&y[w]==="/"){x.condComp=false}continue}x.doubleQuote=y[w]==='"';x.singleQuote=y[w]==="'";if(y[w]==="/"){if(y[w+1]==="*"&&y[w+2]==="@"){x.condComp=true;continue}if(y[w+1]==="*"){y[w]="";x.blockComment=true;continue}if(y[w+1]==="/"){y[w]="";x.lineComment=true;continue}x.regex=true}}return y.join("").slice(2,-2)}localStorage.jfVersion="0.5.6";var d,k=document.createElement("div"),b=document.createElement("span");function m(x,w){var v=b.cloneNode(false);v.className=w;v.innerText=x;return v}function n(w){var v=b.cloneNode(false);v.innerText=w;return v}function u(w){var v=b.cloneNode(false);v.className=w;return v}function p(w){var v=k.cloneNode(false);v.className=w;return v}var t={t_kvov:p("kvov"),t_exp:u("e"),t_key:u("k"),t_string:u("s"),t_number:u("n"),t_null:m("null","nl"),t_true:m("true","bl"),t_false:m("false","bl"),t_oBrace:m("{","b"),t_cBrace:m("}","b"),t_oBracket:m("[","b"),t_cBracket:m("]","b"),t_ellipsis:u("ell"),t_blockInner:u("blockInner"),t_colonAndSpace:document.createTextNode(":\u00A0"),t_commaText:document.createTextNode(","),t_dblqText:document.createTextNode('"')};function i(I,F){var D,H,B,z=t,A,y,v;if(typeof I==="string"){D=c}else{if(typeof I==="number"){D=h}else{if(I===false||I===true){D=q}else{if(I===null){D=s}else{if(I instanceof Array){D=f}else{D=a}}}}}H=z.t_kvov.cloneNode(false);if(D===a||D===f){B=false;for(A in I){if(I.hasOwnProperty(A)){B=true;break}}if(B){H.appendChild(z.t_exp.cloneNode(false))}}if(F!==false){H.classList.add("objProp");y=z.t_key.cloneNode(false);y.textContent=JSON.stringify(F).slice(1,-1);H.appendChild(z.t_dblqText.cloneNode(false));H.appendChild(y);H.appendChild(z.t_dblqText.cloneNode(false));H.appendChild(z.t_colonAndSpace.cloneNode(false))}else{H.classList.add("arrElem")}var G,O;switch(D){case c:var x=b.cloneNode(false),J=JSON.stringify(I);J=J.substring(1,J.length-1);if(I[0]==="h"&&I.substring(0,4)==="http"){var w=document.createElement("A");w.href=I;w.innerText=J;x.appendChild(w)}else{x.innerText=J}v=z.t_string.cloneNode(false);v.appendChild(z.t_dblqText.cloneNode(false));v.appendChild(x);v.appendChild(z.t_dblqText.cloneNode(false));H.appendChild(v);break;case h:v=z.t_number.cloneNode(false);v.innerText=I;H.appendChild(v);break;case a:H.appendChild(z.t_oBrace.cloneNode(true));if(B){H.appendChild(z.t_ellipsis.cloneNode(false));G=z.t_blockInner.cloneNode(false);var E=0,K,N;for(K in I){if(I.hasOwnProperty(K)){E++;O=i(I[K],K);N=z.t_commaText.cloneNode();O.appendChild(N);G.appendChild(O)}}O.removeChild(N);H.appendChild(G)}H.appendChild(z.t_cBrace.cloneNode(true));break;case f:H.appendChild(z.t_oBracket.cloneNode(true));if(B){H.appendChild(z.t_ellipsis.cloneNode(false));G=z.t_blockInner.cloneNode(false);for(var L=0,C=I.length,M=C-1;L<C;L++){O=i(I[L],false);if(L<M){O.appendChild(z.t_commaText.cloneNode())}G.appendChild(O)}H.appendChild(G)}H.appendChild(z.t_cBracket.cloneNode(true));break;case q:if(I){H.appendChild(z.t_true.cloneNode(true))}else{H.appendChild(z.t_false.cloneNode(true))}break;case s:H.appendChild(z.t_null.cloneNode(true));break}return H}function o(x,v){var z=i(x,false);z.classList.add("rootKvov");var w=document.createElement("DIV");w.id="formattedJson";w.appendChild(z);var y=w.outerHTML;if(v!==null){y='<div id="jsonpOpener">'+v+" ( </div>"+y+'<div id="jsonpCloser">)</div>'}return y}var l=function(x){var E=null;var y=JsonFormatEntrance;if(x.type==="SENDING TEXT"){var z,G=x.text;try{z=new Function("return "+G)()}catch(B){G=G.trim();var w;if(!(w=G.indexOf("("))){y.postMessage(["NOT JSON","no opening parenthesis"]);y.disconnect();return}var v=j(G.substring(0,w)).trim();if(!v.match(/^[a-zA-Z_$][\.\[\]'"0-9a-zA-Z_$]*$/)){y.postMessage(["NOT JSON","first bit not a valid function name"]);y.disconnect();return}var F;if(!(F=G.lastIndexOf(")"))){y.postMessage(["NOT JSON","no closing paren"]);y.disconnect();return}var D=j(G.substring(F+1)).trim();if(D!==""&&D!==";"){y.postMessage(["NOT JSON","last closing paren followed by invalid characters"]);y.disconnect();return}G=G.substring(w+1,F);try{z=JSON.parse(G)}catch(C){y.postMessage(["NOT JSON","looks like a function call, but the parameter is not valid JSON"]);return}E=v}if(typeof z!=="object"&&typeof z!=="array"){y.postMessage(["NOT JSON","technically JSON but not an object or array"]);y.disconnect();return}y.postMessage(["FORMATTING"]);var A=o(z,E);y.postMessage(["FORMATTED",A]);y.disconnect()}};var g=function(v){l(v)};var r=function(){};return{postMessage:g,disconnect:r}})();var JsonFormatEntrance=(function(){var t,q,p,j,h,l=JsonFormatDealer,n=+(new Date()),s,w,b,x;var k=function(D){switch(D[0]){case"NOT JSON":q.style.display="";t.innerHTML='<span class="x-json-tips">JSON不合法，请检查：</span>';b=+(new Date());break;case"FORMATTING":w=+(new Date());clearTimeout(h);var A=document.getElementById("optionBar");if(A){A.parentNode.removeChild(A)}A=document.createElement("div");A.id="optionBar";var C=document.createElement("button"),z=document.createElement("button");C.id="buttonFormatted";C.innerText="格式化";C.classList.add("selected");z.id="buttonCollapseAll";z.innerText="折叠所有";var B=false;C.addEventListener("click",function(){if(B){B=false;q.style.display="none";t.style.display="";$(this).text("元数据")}else{B=true;q.style.display="";t.style.display="none";$(this).text("格式化")}$(this).parent().find("button").removeClass("selected");$(this).addClass("selected")},false);z.addEventListener("click",function(){if(B){C.click()}if(!B){if(z.innerText=="折叠所有"){z.innerText="展开所有";f(document.getElementsByClassName("objProp"))}else{z.innerText="折叠所有";c(document.getElementsByClassName("objProp"))}$(this).parent().find("button").removeClass("selected");$(this).addClass("selected")}},false);A.appendChild(C);A.appendChild(z);document.addEventListener("click",o,false);t.parentNode.appendChild(A);break;case"FORMATTED":j.style.display="";t.innerHTML=D[1];x=+(new Date());break;default:throw new Error("Message not understood: "+D[0])}};var v=0;function f(D){var B,A,z,C;for(A=D.length-1;A>=0;A--){B=D[A];B.classList.add("collapsed");if(!B.id){B.id="kvov"+(++v);z=B.firstElementChild;while(z&&!z.classList.contains("blockInner")){z=z.nextElementSibling}if(!z){continue}C=z.children.length;var E=C+(C===1?" item":" items");p.insertAdjacentHTML("beforeend","\n#kvov"+v+'.collapsed:after{color: #aaa; content:" // '+E+'"}')}}}function c(A){for(var z=A.length-1;z>=0;z--){A[z].classList.remove("collapsed")}}var i=navigator.platform.indexOf("Mac")!==-1,d;if(i){d=function(z){return z.metaKey}}else{d=function(z){return z.ctrlKey}}function o(C){if(C.which===1){var B=C.target;if(B.className==="e"){C.preventDefault();var A=B.parentNode,G=t,z=document.body.offsetHeight,E=document.body.scrollTop,D;if(A.classList.contains("collapsed")){if(d(C)){c(A.parentNode.children)}else{c([A])}}else{if(d(C)){f(A.parentNode.children)}else{f([A])}}G.style.marginBottom=0;if(document.body.offsetHeight<window.innerHeight){return}if(document.body.scrollTop===E){return}var F=E-document.body.scrollTop+8;G.style.marginBottom=F+"px";document.body.scrollTop=E;return}}}var g=function(z){k(z)};var y=function(){};var u=function(z){t=document.getElementById("jfContent");if(!t){t=document.createElement("div");t.id="jfContent";document.body.appendChild(t)}t.style.display="";q=document.getElementById("jfContent_pre");if(!q){q=document.createElement("pre");q.id="jfContent_pre";document.body.appendChild(q)}q.innerHTML=JSON.stringify(JSON.parse(z),null,4);q.style.display="none";p=document.getElementById("jfStyleEl");if(!p){p=document.createElement("style");document.head.appendChild(p)}j=document.getElementById("formattingMsg");if(!j){j=document.createElement("pre");j.id="formattingMsg";j.innerHTML='<svg id="spinner" width="16" height="16" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z" fill="#3d7fe6"></path></svg> 格式化中...';document.body.appendChild(j)}l.postMessage({type:"SENDING TEXT",text:z,length:z.length});a(JSON.parse(z))};var a=function(C){var B=location.href;var E=(new Date()).format("yyyyMMddHHmmss");var D=JSON.stringify(C,null,4);D=["/* ",B," */","\n",D].join("");var A=new Blob([D],{type:"application/octet-stream"});var z=$('<a id="btnDownload" target="_blank" title="保存到本地">下载JSON数据</a>').prependTo("#optionBar");z.attr("download","FeHelper-"+E+".json");z.attr("href",URL.createObjectURL(A))};var m=function(z){try{window.webkitRequestFileSystem(window.TEMPORARY,10*1024*1024,function(B){var D=(+new Date).toString(36);var C=+new Date()+".json";B.root.getDirectory(D,{create:true},function(F){var E=D+"/"+C;B.root.getFile(E,{create:true},function(G){G.createWriter(function(K){K.onwriteend=function(){$("#optionBar").prepend('<a href="'+G.toURL()+'" id="btnDownload" target="_blank" title="在新页面Ctrl+S保存到本地">下载JSON数据</a>')};var I=location.href;var J=JSON.stringify(z,null,4);J=["/* ",I," */","\n",J].join("");var H=new Blob([J],{type:"application/octet-stream"});K.write(H)})})})})}catch(A){}};var r=function(){try{t.innerHTML="";q.innerHTML=""}catch(z){}};return{format:u,clear:r,postMessage:g,disconnect:y}})();baidu.csJsonFormat=(function(){var d=['<div class="mod-json mod-contentscript"><div class="rst-item">','<div id="formattingMsg">','<svg id="spinner" width="16" height="16" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" version="1.1">','<path d="M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z" fill="#3d7fe6"></path>',"</svg>加载中...","</div>",'<div id="jfCallbackName_start" class="callback-name"></div>','<div id="jfContent"></div>','<pre id="jfContent_pre"></pre>','<div id="jfCallbackName_end" class="callback-name"></div>',"</div></div>"].join("");var i=function(){var k=chrome.extension.getURL("static/css/fe-jsonformat-content.css");jQuery('<link id="_fehelper_fcp_css_" href="'+k+'" rel="stylesheet" type="text/css" />').appendTo("head")};var f=function(){var r=$("body>pre:eq(0)")[0]||{textContent:""};var p=$.trim(r.textContent);if(!p){p=$.trim(document.body.textContent||"")}if(!p){return false}var l=document.body.childNodes;var q="";for(var o=0,k=l.length;o<k;o++){if(l[o].nodeType==Node.TEXT_NODE){q+=l[o].textContent}else{if(l[o].nodeType==Node.ELEMENT_NODE){var n=l[o].tagName.toLowerCase();var m=$.trim(l[o].textContent);if(n==="pre"&&m===p){continue}else{if((l[o].offsetWidth===0||l[o].offsetHeight===0||!m)&&["script","link"].indexOf(n)==-1){continue}else{return false}}}else{return false}}}return $.trim(q||"")||p};var a=function(o){o=o.replace(/\\/g,"%").replace("%U","%u").replace("%u0025","%25");o=unescape(o.toString().replace(/%2B/g,"+"));var m=o.match(/(%u00([0-9A-F]{2}))/gi);if(m){for(var n=0;n<m.length;n++){var l=m[n].substring(1,3);var k=Number("0x"+l);if(k>=128){o=o.replace(m[n],l)}}}o=unescape(o.toString().replace(/%2B/g,"+"));return o};var j=function(l){const k=document.createElement("textarea");k.style.position="fixed";k.style.opacity=0;k.value=l;document.body.appendChild(k);k.select();document.execCommand("Copy");document.body.removeChild(k);alert("Json片段复制成功，随处粘贴可用！")};var b=function(m){var o=function(r){var p=m.text().replace(/":\s/gm,'":').replace(/,$/,"").trim();if(!(/^{/.test(p)&&/\}$/.test(p))&&!(/^\[/.test(p)&&/\]$/.test(p))){p="{"+p+"}"}try{p=JSON.stringify(JSON.parse(p),null,4)}catch(t){}var s=(new Date()).format("yyyyMMddHHmmss");var q=new Blob([p],{type:"application/octet-stream"});$(this).attr("download","FeHelper-"+s+".json").attr("href",URL.createObjectURL(q))};var n=function(q){var p=m.text().replace(/":\s/gm,'":').replace(/,$/,"").trim();if(!(/^{/.test(p)&&/\}$/.test(p))&&!(/^\[/.test(p)&&/\]$/.test(p))){p="{"+p+"}"}try{p=JSON.stringify(JSON.parse(p),null,4)}catch(r){}j(p)};var l=function(p){if(m.parent().is("#formattedJson")){alert("如果连最外层的Json也删掉的话，就没啥意义了哦！");return false}m.remove();k.css("top",-1000)};var k=$("#boxOpt");if(!k.length){k=$('<div id="boxOpt"><a class="opt-download" target="_blank">下载</a>|<a class="opt-copy">复制</a>|<a class="opt-del">删除</a></div>').appendTo("body")}k.find("a.opt-download").unbind("click").bind("click",o);k.find("a.opt-copy").unbind("click").bind("click",n);k.find("a.opt-del").unbind("click").bind("click",l);k.css({left:m.offset().left+m.width()-90,top:m.offset().top})};var h=function(){$("#jfContent").delegate(".kvov","click",function(l){$("#jfContent .kvov").removeClass("x-outline");var k=$(this).removeClass("x-hover").addClass("x-outline");b(k);if(!$(l.target).is(".kvov .e")){l.stopPropagation()}else{$(l.target).parent().trigger("click")}}).delegate(".kvov","mouseover",function(k){$(this).addClass("x-hover");return false}).delegate(".kvov","mouseout",function(k){$(this).removeClass("x-hover")})};var c=function(){var l=f();if(!l){return}var v=null;var y=null;var n=l;var w=null;var o=null;try{var p=/^([\w\.]+)\(\s*([\s\S]*)\s*\)$/gm;var m=/^(try\s*\{\s*)?/g;var x=/(\}\s*catch\s*\(\s*\S+\s*\)\s*\{([\s\S])*\})?$/g;var k=l.replace(m,function(){w=w?w:arguments[1];return""}).replace(x,function(){o=o?o:arguments[1];return""}).trim();var t=p.exec(k);if(t!=null&&(w&&o||!w&&!o)){v=t[1];n=t[2];y=new Function("return "+n)()}else{p=/^([\{\[])/;if(!p.test(l)){return}}if(y==null||typeof y!="object"){y=new Function("return "+l)();if(typeof y=="string"){y=new Function("return "+y)()}}}catch(u){return}if(y!=null&&typeof y=="object"){try{var q=JSON.stringify(y);var s=q.replace(/'|"|\s/g,"").length;var r=(a(n)).replace(/'|"|\s/g,"").length;if(Math.abs(s-r)/((s+r)/2)>0.2){return}n=q}catch(u){return}$("body").html(d);i();h();JsonFormatEntrance.clear();JsonFormatEntrance.format(n);if(v!=null){if(w&&o){$("#jfCallbackName_start").html('<pre style="padding:0">'+w+"</pre>"+v+"(");$("#jfCallbackName_end").html(')<br><pre style="padding:0">'+o+"</pre>")}else{$("#jfCallbackName_start").html(v+"(");$("#jfCallbackName_end").html(")")}}}};var g=function(){$(function(){if(baidu.feOption.pageJsonMustFormat){c()}else{chrome.extension.sendMessage({type:MSG_TYPE.GET_OPTIONS,items:["JSON_PAGE_FORMAT"]},function(k){if(k.JSON_PAGE_FORMAT!="false"){c()}})}})};return{init:g}})();baidu.csJsonFormat.init();